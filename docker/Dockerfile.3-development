# Layer 3: Development layer for future enhancements
FROM claude-docker:minimal

# This layer is for future development and experimental features
# It builds on top of the stable minimal layer

USER developer
WORKDIR /home/developer

# Add any development tools or experimental features here
# Examples:
# - Additional language servers for neovim
# - Extra debugging tools
# - Development databases
# - Additional programming language runtimes

# Set up Claude YOLO config for container environment (experimental)
# This allows Claude to run without permission checks in the container
RUN mkdir -p ~/.config/claude && \
    echo '{\
  "permissions": {\
    "yolo": true,\
    "allow": ["*"],\
    "deny": []\
  },\
  "env": {\
    "CLAUDE_MODE": "container",\
    "CLAUDE_CONTAINER": "true"\
  }\
}' > ~/.config/claude/settings.json && \
    echo "Claude configured in YOLO mode for container development"

# Create symlinks for auth files that might be mounted
# This allows credentials to be mounted at various locations
RUN mkdir -p ~/.claude-auth && \
    ln -sf ~/.claude-auth/auth.json ~/.config/claude/auth.json 2>/dev/null || true && \
    echo "Prepared auth mounting points"

WORKDIR /home/developer/gits
LABEL description="Development layer with Claude YOLO mode"