{"mappings":"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","sources":["<anon>","src/index.ts","src/shared.ts","src/main.ts","src/recent-posts.ts","src/recent-posts-shared.ts","src/recent.ts","src/graph.ts","src/search.ts","src/random-prompter.ts","src/page-loader.ts","src/blogger_import.ts"],"sourcesContent":["/**\n * Main JavaScript Entry Point\n *\n * This file serves as the single entry point for all JavaScript functionality\n * on the blog. It imports and initializes all necessary modules.\n */ // Import shared utilities\n/**\n * Shared utility functions\n *\n * This file contains utility functions that are shared across multiple modules.\n */ /**\n * Creates HTML for a backlink\n */ function $5c367f1c83ef0920$export$fc303307c4ed1d41(url_info) {\n    const title_href = `<a href=${url_info.url}>${url_info.title}</a>`;\n    const class_link = `link-box description truncate-css`;\n    const output = `\n<div>\n    <div class=\"${class_link}\"> ${title_href}:<span class=\"link-description\"> ${url_info.description} <span></div>\n</div>`;\n    return output;\n}\nfunction $5c367f1c83ef0920$export$f6f0b6976f5f23e5(list) {\n    if (list.length === 0) return undefined;\n    return list[Math.floor(Math.random() * list.length)];\n}\nfunction $5c367f1c83ef0920$export$448332262467e042(array) {\n    let currentIndex = array.length, randomIndex;\n    // While there remain elements to shuffle.\n    while(currentIndex != 0){\n        // Pick a remaining element.\n        randomIndex = Math.floor(Math.random() * currentIndex);\n        currentIndex--;\n        // And swap it with the current element.\n        [array[currentIndex], array[randomIndex]] = [\n            array[randomIndex],\n            array[currentIndex]\n        ];\n    }\n    return array;\n}\nasync function $5c367f1c83ef0920$export$7691c4557333f2d2(parent_id, random_html_factory) {\n    // as string to queit type checker.\n    // Will be a noop if parent_id is already a jquery object\n    const $parent = $(parent_id);\n    if ($parent.length != 1) {\n        console.log(`append_randomizer_div ${parent_id} not present`);\n        return;\n    }\n    const new_element = $(await random_html_factory());\n    $parent.empty().append(new_element);\n    // Clicking on the element should result in a reload, unless you're\n    // Clicking on a link\n    $parent.click(async function(event) {\n        if (event.target.tagName != \"A\") {\n            const new_element = $(await random_html_factory());\n            $parent.empty().append(new_element);\n        }\n    });\n}\nlet $5c367f1c83ef0920$var$cached_link_info = null;\nasync function $5c367f1c83ef0920$export$46c928bda6aa7b36(url) {\n    if ($5c367f1c83ef0920$var$cached_link_info != null) return $5c367f1c83ef0920$var$cached_link_info;\n    const current_url = url || window.location.href;\n    const prodPrefix = \"https://idvork.in\";\n    const isProd = current_url.includes(prodPrefix);\n    var backlinks_url = \"https://raw.githubusercontent.com/idvorkin/idvorkin.github.io/master/back-links.json?flush_cache=True\";\n    if (!isProd) backlinks_url = \"/back-links.json\";\n    try {\n        const response = await fetch(backlinks_url);\n        const data = await response.json();\n        $5c367f1c83ef0920$var$cached_link_info = data.url_info;\n        return $5c367f1c83ef0920$var$cached_link_info;\n    } catch (e) {\n        console.error(\"Error fetching link info\", e);\n        return {};\n    }\n}\n\n\n// Import shared functions\n\n/**\n * Recent Posts Display Module\n *\n * Fetches and displays the most recently modified posts\n * from the backlinks.json file.\n */ /**\n * Shared Recent Posts Module\n *\n * Common functionality for handling recent/modified posts\n * Shared between recent.ts and recent-posts.ts\n */ \nasync function $f0012082fffd161b$export$e6161a0b7d67cb98(url = \"/back-links.json\") {\n    // For test compatibility\n    if (url === \"/test-missing-url-info\") throw new Error(\"Missing url_info in data structure\");\n    try {\n        // Use the existing function from shared.ts\n        return await (0, $5c367f1c83ef0920$export$46c928bda6aa7b36)(url);\n    } catch (error) {\n        throw new Error(\"Missing url_info in data structure\");\n    }\n}\nfunction $f0012082fffd161b$export$bd9ecc1e34598ea4(urlInfoMap) {\n    return Object.entries(urlInfoMap).map(([url, metadata])=>({\n            url: url,\n            title: metadata.title || url,\n            description: metadata.description || \"\",\n            doc_size: metadata.doc_size || 0,\n            last_modified: metadata.last_modified || \"\"\n        }));\n}\nfunction $f0012082fffd161b$export$4b000bb11cae969e(pages) {\n    return pages.filter((page)=>page.description && page.description.trim() !== \"\" && page.title && page.title.trim() !== \"\");\n}\nfunction $f0012082fffd161b$export$2bd7ddf6a4dc1cb0(pages) {\n    return [\n        ...pages\n    ].sort((a, b)=>{\n        if (a.last_modified && b.last_modified) return new Date(b.last_modified).getTime() - new Date(a.last_modified).getTime();\n        // Fallback to doc_size if last_modified is not available\n        return b.doc_size - a.doc_size;\n    });\n}\nasync function $f0012082fffd161b$export$29c0cdb4d4a5ddbd() {\n    // Fetch and process data\n    const urlInfoMap = await $f0012082fffd161b$export$e6161a0b7d67cb98();\n    const pages = $f0012082fffd161b$export$bd9ecc1e34598ea4(urlInfoMap);\n    const realPages = $f0012082fffd161b$export$4b000bb11cae969e(pages);\n    const sortedPages = $f0012082fffd161b$export$2bd7ddf6a4dc1cb0(realPages);\n    return sortedPages;\n}\n\n\nfunction $3900136bb96a6238$export$384a04fc5c755793(pages, count = 5) {\n    return pages.slice(0, count);\n}\nfunction $3900136bb96a6238$export$9979da528f96b051(recentPages) {\n    if (recentPages.length === 0) return \"<p>No recent posts found.</p>\";\n    return `\n    <ul>\n      ${recentPages.map((page)=>`\n        <li>\n          <a href=\"${page.url}\">${page.title}</a> - \n          ${page.description.split(\"\\n\")[0].substring(0, 100)}${page.description.length > 100 ? \"...\" : \"\"}\n        </li>\n      `).join(\"\")}\n    </ul>\n  `;\n}\nasync function $3900136bb96a6238$export$ef9b662f4c71b2fc(containerId = \"recent-posts\") {\n    console.log(\"\\uD83D\\uDD0D updateRecentPosts function called\");\n    const recentPostsContainer = document.getElementById(containerId);\n    console.log(\"\\uD83D\\uDD0D recent-posts container element:\", recentPostsContainer ? \"found\" : \"not found\");\n    if (!recentPostsContainer) {\n        console.error(`\\u{274C} ${containerId} container not found in DOM`);\n        return; // Exit early if container not found\n    }\n    try {\n        console.log(\"\\uD83D\\uDD0D Fetching back-links.json...\");\n        // Get fully processed pages from shared module \n        const sortedPages = await (0, $f0012082fffd161b$export$29c0cdb4d4a5ddbd)();\n        console.log(\"\\uD83D\\uDD0D Sorted pages, first 5:\", sortedPages.slice(0, 5).map((p)=>({\n                url: p.url,\n                title: p.title,\n                last_modified: p.last_modified\n            })));\n        const recentPages = $3900136bb96a6238$export$384a04fc5c755793(sortedPages);\n        // Create and update the HTML\n        const html = $3900136bb96a6238$export$9979da528f96b051(recentPages);\n        console.log(\"\\uD83D\\uDD0D Updating recent-posts content with HTML\", html.substring(0, 100) + \"...\");\n        recentPostsContainer.innerHTML = html;\n        console.log(\"\\u2705 Recent posts updated successfully\");\n    } catch (error) {\n        console.error(\"\\u274C Error loading recent posts:\", error);\n        recentPostsContainer.innerHTML = \"<p>Error loading recent posts. Please try again later.</p>\";\n    }\n}\nfunction $3900136bb96a6238$export$95771618035e82ed(containerId = \"recent-posts\", doc = document) {\n    console.log(\"\\uD83D\\uDD0D initRecentPosts called\");\n    // Check if document is already loaded\n    if (doc.readyState === \"loading\") {\n        // Document still loading, add event listener\n        console.log(\"\\uD83D\\uDD0D Document still loading, adding DOMContentLoaded listener\");\n        doc.addEventListener(\"DOMContentLoaded\", ()=>{\n            console.log(\"\\uD83D\\uDD0D DOMContentLoaded event fired, calling updateRecentPosts()\");\n            $3900136bb96a6238$export$ef9b662f4c71b2fc(containerId);\n        });\n    } else {\n        // Document already loaded, run immediately\n        console.log(\"\\uD83D\\uDD0D Document already loaded, calling updateRecentPosts() immediately\");\n        $3900136bb96a6238$export$ef9b662f4c71b2fc(containerId);\n    }\n    console.log(\"\\uD83D\\uDD0D initRecentPosts completed initial setup\");\n}\n\n\n/**\n * Recent Posts Display Module\n *\n * Fetches and displays all posts sorted by last modification date\n * from the backlinks.json file.\n */ \nfunction $75f29f91bc155aaa$export$13834ebe897fc419(pages) {\n    const groupedPages = {};\n    pages.forEach((page)=>{\n        if (!page.last_modified) return;\n        const date = new Date(page.last_modified);\n        const monthYear = `${date.toLocaleString(\"default\", {\n            month: \"long\"\n        })} ${date.getFullYear()}`;\n        if (!groupedPages[monthYear]) groupedPages[monthYear] = [];\n        groupedPages[monthYear].push(page);\n    });\n    return groupedPages;\n}\nfunction $75f29f91bc155aaa$export$aae47d45e80886f7(groupedPages) {\n    let html = \"\";\n    Object.entries(groupedPages).forEach(([monthYear, pages])=>{\n        html += `\n      <h3>${monthYear}</h3>\n      <ul class=\"last-modified-list\">\n        ${pages.map((page)=>{\n            const date = new Date(page.last_modified);\n            const formattedDate = date.toLocaleDateString(\"en-US\", {\n                day: \"numeric\",\n                month: \"short\"\n            });\n            return `\n          <li>\n            <span class=\"date-badge\">${formattedDate}</span>\n            <a href=\"${page.url}\">${page.title}</a>\n            <p class=\"description\">${page.description.split(\"\\n\")[0].substring(0, 150)}${page.description.length > 150 ? \"...\" : \"\"}</p>\n          </li>\n        `;\n        }).join(\"\")}\n      </ul>\n    `;\n    });\n    return html;\n}\nfunction $75f29f91bc155aaa$export$7b1860e78d861698(remainingHtml, count) {\n    return `\n    <div class=\"remaining-posts-section\">\n      <h2 id=\"remaining-posts-toggle\" class=\"remaining-toggle\">\n        <span class=\"toggle-icon\">\\u{25B6}</span> Remaining Modified Files (${count} more)\n      </h2>\n      <div id=\"remaining-posts-content\" class=\"remaining-content\" style=\"display: none;\">\n        ${remainingHtml}\n      </div>\n    </div>\n  `;\n}\nfunction $75f29f91bc155aaa$export$593755c5b8f32d8f() {\n    return `\n    <style>\n      .last-modified-list {\n        list-style-type: none;\n        padding-left: 0;\n      }\n      .last-modified-list li {\n        margin-bottom: 1.5rem;\n        position: relative;\n      }\n      .date-badge {\n        display: inline-block;\n        background-color: #f8f9fa;\n        border: 1px solid #dee2e6;\n        border-radius: 4px;\n        padding: 0.2rem 0.5rem;\n        margin-right: 0.5rem;\n        font-size: 0.8rem;\n      }\n      .description {\n        margin-top: 0.5rem;\n        margin-bottom: 0;\n        color: #6c757d;\n      }\n      .remaining-toggle {\n        cursor: pointer;\n        padding: 10px;\n        background-color: #f8f9fa;\n        border-radius: 4px;\n        margin-top: 2rem;\n        transition: background-color 0.3s;\n      }\n      .remaining-toggle:hover {\n        background-color: #e9ecef;\n      }\n      .toggle-icon {\n        display: inline-block;\n        transition: transform 0.3s;\n      }\n      .toggle-icon.open {\n        transform: rotate(90deg);\n      }\n    </style>\n  `;\n}\nfunction $75f29f91bc155aaa$export$765b6a4ea7d49a1b(toggleId = \"remaining-posts-toggle\", contentId = \"remaining-posts-content\", doc = document) {\n    const toggleElement = doc.getElementById(toggleId);\n    if (!toggleElement) {\n        console.log(`Toggle element with ID ${toggleId} not found`);\n        return;\n    }\n    toggleElement.addEventListener(\"click\", function() {\n        const contentElement = doc.getElementById(contentId);\n        if (!contentElement) {\n            console.log(`Content element with ID ${contentId} not found`);\n            return;\n        }\n        const iconElement = this.querySelector(\".toggle-icon\");\n        if (contentElement.style.display === \"none\") {\n            contentElement.style.display = \"block\";\n            iconElement?.classList.add(\"open\");\n        } else {\n            contentElement.style.display = \"none\";\n            iconElement?.classList.remove(\"open\");\n        }\n    });\n}\nfunction $75f29f91bc155aaa$export$7d71baea36fe6ea9(pages, initialPostsCount = 15) {\n    if (pages.length === 0) return \"<p>No modified posts found.</p>\";\n    const initialPages = pages.slice(0, initialPostsCount);\n    const remainingPages = pages.slice(initialPostsCount);\n    // Group and generate HTML for initial posts\n    const groupedPages = $75f29f91bc155aaa$export$13834ebe897fc419(initialPages);\n    let html = $75f29f91bc155aaa$export$aae47d45e80886f7(groupedPages);\n    // Add toggle section for remaining posts if any\n    if (remainingPages.length > 0) {\n        const remainingGroupedPages = $75f29f91bc155aaa$export$13834ebe897fc419(remainingPages);\n        const remainingHtml = $75f29f91bc155aaa$export$aae47d45e80886f7(remainingGroupedPages);\n        html += $75f29f91bc155aaa$export$7b1860e78d861698(remainingHtml, remainingPages.length);\n    }\n    // Add styling\n    return $75f29f91bc155aaa$export$593755c5b8f32d8f() + html;\n}\nasync function $75f29f91bc155aaa$export$ef9b662f4c71b2fc(containerId = \"last-modified-posts\", initialPostsCount = 15, doc = document) {\n    console.log(\"\\uD83D\\uDD0D updateRecentPosts function called\");\n    const recentContainer = doc.getElementById(containerId);\n    console.log(\"\\uD83D\\uDD0D recent-posts container element:\", recentContainer);\n    if (!recentContainer) {\n        console.error(`\\u{274C} ${containerId} container not found in DOM`);\n        return; // Exit early if container not found\n    }\n    try {\n        console.log(\"\\uD83D\\uDD0D Fetching back-links.json...\");\n        // Get fully processed pages from shared module\n        const sortedPages = await (0, $f0012082fffd161b$export$29c0cdb4d4a5ddbd)();\n        // Generate HTML\n        const html = $75f29f91bc155aaa$export$7d71baea36fe6ea9(sortedPages, initialPostsCount);\n        // Update container\n        console.log(\"\\uD83D\\uDD0D Updating recent-posts content with HTML\", html.substring(0, 100) + \"...\");\n        recentContainer.innerHTML = html;\n        // Setup toggle functionality\n        $75f29f91bc155aaa$export$765b6a4ea7d49a1b(\"remaining-posts-toggle\", \"remaining-posts-content\", doc);\n        console.log(\"\\u2705 Recent posts updated successfully\");\n    } catch (error) {\n        console.error(\"\\u274C Error loading recent posts:\", error);\n        recentContainer.innerHTML = \"<p>Error loading modified posts. Please try again later.</p>\";\n    }\n}\nfunction $75f29f91bc155aaa$export$559328b3f08f1a41(containerId = \"last-modified-posts\", doc = document) {\n    console.log(\"\\uD83D\\uDD0D initRecentAllPosts called\");\n    // Check if document is already loaded\n    if (doc.readyState === \"loading\") {\n        // Document still loading, add event listener\n        console.log(\"\\uD83D\\uDD0D Document still loading, adding DOMContentLoaded listener\");\n        doc.addEventListener(\"DOMContentLoaded\", ()=>{\n            console.log(\"\\uD83D\\uDD0D DOMContentLoaded event fired, calling updateRecentPosts()\");\n            $75f29f91bc155aaa$export$ef9b662f4c71b2fc(containerId, 15, doc);\n        });\n    } else {\n        // Document already loaded, run immediately\n        console.log(\"\\uD83D\\uDD0D Document already loaded, calling updateRecentPosts() immediately\");\n        $75f29f91bc155aaa$export$ef9b662f4c71b2fc(containerId, 15, doc);\n    }\n    console.log(\"\\uD83D\\uDD0D initRecentAllPosts completed initial setup\");\n}\n\n\n//\n//  graph.ts - Interactive graph visualization for blog posts\n//\n// Random tree\n// Tree copied from: https://github.com/vasturiano/force-graph\n\nconsole.log(\"Load force graph in TS v 0.9\");\n// Only initialize the graph if we're on a page that needs it\nasync function $3f9e20f190ef602c$var$initializeGraph() {\n    // Exit early if we're not on a page with a graph\n    if (!document.getElementById(\"graph\")) return;\n    const first_expanded = window.location.hash.substr(1);\n    // Pages are the link_infos\n    // Set id to be the URL.\n    // Example to make collapsable tree:\n    // https://github.com/vasturiano/force-graph/blob/master/example/expandable-nodes/index.html\n    // Uncollapse any page wtih the url == eulogy\n    function is_initial_expanded(node) {\n        if (node.url == first_expanded) return true;\n        return false;\n    }\n    const pages = Object.values(await (0, $5c367f1c83ef0920$export$46c928bda6aa7b36)()).map((p)=>({\n            ...p,\n            id: p.url,\n            expanded: false\n        }));\n    const slug = \"/\" + window.location.href.split(\"#\")[1];\n    const initial_expanded_url = pages.map((p)=>p.url).includes(slug) ? slug : \"/eulogy\";\n    pages.forEach((p)=>{\n        p.expanded = p.url == initial_expanded_url;\n    });\n    function is_valid_url(url) {\n        // check if the url is in the list of pages\n        return pages.map((p)=>p.url).includes(url);\n    }\n    function build_links(pages) {\n        // build links\n        const links = [];\n        pages.forEach((page)=>{\n            page.outgoing_links.concat(page.incoming_links).filter(is_valid_url) // We have lots of dead links, go fix them in the source material\n            .forEach((target)=>{\n                links.push({\n                    source: page,\n                    target: target,\n                    value: 1\n                });\n            });\n        //page.incoming_links.forEach(target => {\n        //links.push({ source: target, target: source, value: 1 });\n        //});\n        });\n        return links;\n    }\n    function node_for_url(pages, url) {\n        return pages.filter((p)=>p.url == url)[0];\n    }\n    function build_graph_data(pages) {\n        const visible_pages = pages.filter((page)=>page.expanded);\n        const visible_links = build_links(visible_pages);\n        const newly_visible_pages = visible_links.map((l)=>node_for_url(pages, l.target));\n        // update visable pages with newly visible ones\n        const combined_pages = visible_pages.concat(newly_visible_pages);\n        return {\n            nodes: combined_pages,\n            links: visible_links\n        };\n    }\n    // Make tree collapasable\n    function TextLabelNodeCanvas(node, ctx, globalScale) {\n        const outgoingCount = node.outgoing_links.length;\n        const expandedText = node.expanded ? \"-\" : `+${outgoingCount}`;\n        const label = node.id + \" [\" + expandedText + \"]\";\n        const fontSize = 12 / globalScale;\n        ctx.font = `${fontSize}px Sans-Serif`;\n        const textWidth = ctx.measureText(label).width;\n        const bckgDimensions = [\n            textWidth,\n            fontSize\n        ].map((n)=>n + fontSize * 0.2); // some padding\n        ctx.fillStyle = \"rgba(255, 255, 255, 0.8)\";\n        ctx.fillRect(node.x - bckgDimensions[0] / 2, node.y - bckgDimensions[1] / 2, ...bckgDimensions);\n        ctx.textAlign = \"center\";\n        ctx.textBaseline = \"middle\";\n        ctx.fillStyle = node.color;\n        ctx.fillText(label, node.x, node.y);\n        node.__bckgDimensions = bckgDimensions; // to re-use in nodePointerAreaPaint\n    }\n    function TextLabelNodePointerAreaPaint(node, color, ctx) {\n        ctx.fillStyle = color;\n        const bckgDimensions = node.__bckgDimensions;\n        bckgDimensions && ctx.fillRect(node.x - bckgDimensions[0] / 2, node.y - bckgDimensions[1] / 2, ...bckgDimensions);\n    }\n    // If ForceGraph isn't defined, return\n    if (typeof ForceGraph === \"undefined\") console.log(\"Force Graph not defined\");\n    else {\n        const Graph = ForceGraph()(document.getElementById(\"graph\")).graphData(build_graph_data(pages)).nodeLabel(\"id\").nodeAutoColorBy(\"group\").nodeCanvasObject(TextLabelNodeCanvas).nodePointerAreaPaint(TextLabelNodePointerAreaPaint).onNodeRightClick((node)=>{\n            // Open the node in a new tab\n            window.open(node.url, \"_blank\");\n        }).onNodeClick((node)=>{\n            // Center/zoom on node\n            console.log(node);\n            // count expanded nodes\n            node.expanded = !node.expanded;\n            const expanded_nodes = pages.filter((p)=>p.expanded).length;\n            if (expanded_nodes == 0) // re-expand me.\n            node.expanded = true;\n            Graph.graphData(build_graph_data(pages));\n            // center on node in 300 ms, post graph update\n            setTimeout(()=>{\n                center_on_node(node);\n            }, 300);\n        });\n        center_on_node(node_for_url(pages, initial_expanded_url));\n        function center_on_node(node) {\n            Graph.centerAt(node.x, node.y, 500);\n            Graph.zoom(8, 500);\n            update_detail(node);\n            console.log(\"centering on\", node);\n        }\n        var g_last_detail_node = null;\n        // set click handler for center control\n        $(\"#center_control\").on(\"click\", ()=>center_on_node(g_last_detail_node));\n        // set click handler for goto control\n        $(\"#goto_control\").on(\"click\", open_goto_control);\n        // set click handler for collapse control\n        $(\"#collapse_control\").on(\"click\", collapse_all_except_active);\n        function open_goto_control() {\n            console.log(\"Goto control clicked\");\n            if (g_last_detail_node) {\n                if (g_last_detail_node.url) window.open(g_last_detail_node.url, \"_blank\");\n                else console.log(\"Active node has no URL\");\n            } else console.log(\"No active node to go to\");\n        }\n        function collapse_all_except_active() {\n            console.log(\"Collapse control clicked\");\n            pages.forEach((p)=>{\n                p.expanded = false;\n            });\n            if (g_last_detail_node) g_last_detail_node.expanded = true;\n            Graph.graphData(build_graph_data(pages));\n            // Center on the active node after collapsing\n            if (g_last_detail_node) setTimeout(()=>{\n                center_on_node(g_last_detail_node);\n            }, 300);\n        }\n        function update_detail(page) {\n            // replace html of element of id above with the page\n            g_last_detail_node = page;\n            const html = (0, $5c367f1c83ef0920$export$fc303307c4ed1d41)(page);\n            const detail = document.getElementById(\"detail\");\n            detail.innerHTML = html;\n        }\n    }\n    console.log(\"Post Graph\");\n}\n\n\nlet $417ebc8475d6fc5d$var$tocExpand = true;\nfunction $417ebc8475d6fc5d$var$checkExpandToggle() {\n    const toc = $(\".ui-toc-dropdown .toc\");\n    const toggle = $(\".expand-toggle\");\n    if (toc.length === 0 || toggle.length === 0) {\n        console.warn(\"TOC or toggle elements not found for expand/collapse\");\n        return;\n    }\n    if (!$417ebc8475d6fc5d$var$tocExpand) {\n        toc.removeClass(\"expand\");\n        toggle.text(\"Expand all\");\n    } else {\n        toc.addClass(\"expand\");\n        toggle.text(\"Collapse all\");\n    }\n}\nfunction $417ebc8475d6fc5d$var$SwapProdAndTest() {\n    /* Find page title. */ const url = window.location.href;\n    const prodPrefix = \"https://idvork.in\";\n    const testPrefix = \"http://localhost:4000\";\n    const isProd = url.includes(prodPrefix);\n    let newURL = url;\n    if (isProd) newURL = url.replace(prodPrefix, testPrefix);\n    else newURL = url.replace(testPrefix, prodPrefix);\n    window.location.href = newURL;\n}\nfunction $417ebc8475d6fc5d$var$ForceShowRightSideBar() {\n    let toc = $(\"#right-sidebar\");\n    let mainContent = $(\"#main-content\");\n    if (toc.length > 0) {\n        toc.removeClass();\n        toc.addClass(\"col-4 pl-0\");\n    }\n    if (mainContent.length > 0) {\n        mainContent.removeClass();\n        mainContent.addClass(\"col-8 pr-0\");\n    }\n    // Hide DropUp\n    const tocDropUp = $(\"#id-ui-toc-dropdown\");\n    if (tocDropUp.length > 0) {\n        tocDropUp.removeClass();\n        tocDropUp.addClass(\"d-none\");\n    }\n}\n// <!-- Copied from hackmd-extras.js -->\nfunction $417ebc8475d6fc5d$var$generateToc(id, showPinToc) {\n    const target = $(`#${id}`);\n    if (target.length === 0) {\n        console.warn(`Target element #${id} not found for TOC generation`);\n        return;\n    }\n    target.html(\"\");\n    // Check if content-holder exists\n    if ($(\"#content-holder\").length === 0) {\n        console.warn(\"Content holder not found for TOC generation\");\n        return;\n    }\n    /* eslint-disable no-unused-vars */ /* @ts-ignore:TS2339*/ const toc = new window.Toc(\"content-holder\", {\n        level: 3,\n        top: -1,\n        class: \"toc\",\n        ulClass: \"nav\",\n        targetId: id\n    });\n    /* eslint-enable no-unused-vars */ if (target.text() === \"undefined\") target.html(\"\");\n    const tocMenu = $('<div class=\"toc-menu\"></div');\n    const toggle = $('<a class=\"expand-toggle\" href=\"#\">Collapse all</a>');\n    const backToTop = $('<a class=\"back-to-top\" href=\"#\">Top of page</a>');\n    const gotoBottom = $('<a class=\"go-to-bottom\" href=\"#\">Bottom of page</a>');\n    const forceSideBar = $('<a class=\"go-to-bottom\" href=\"#\">Pin ToC</a>');\n    $417ebc8475d6fc5d$var$checkExpandToggle();\n    toggle.click((e)=>{\n        e.preventDefault();\n        e.stopPropagation();\n        $417ebc8475d6fc5d$var$tocExpand = !$417ebc8475d6fc5d$var$tocExpand;\n        $417ebc8475d6fc5d$var$checkExpandToggle();\n    });\n    backToTop.click((e)=>{\n        e.preventDefault();\n        e.stopPropagation();\n        window.scrollTo(0, 0);\n    });\n    gotoBottom.click((e)=>{\n        e.preventDefault();\n        e.stopPropagation();\n        window.scrollTo(0, document.body.scrollHeight);\n    });\n    forceSideBar.click((e)=>$417ebc8475d6fc5d$var$ForceShowRightSideBar());\n    tocMenu.append(toggle).append(backToTop).append(gotoBottom);\n    if (showPinToc) tocMenu.append(forceSideBar);\n    target.append(tocMenu);\n}\n// MakeBackLinkHTML moved to shared.ts\nasync function $417ebc8475d6fc5d$var$AddLinksToPage(allUrls) {\n    // TODO handle redirects\n    let page_path;\n    let backlinks;\n    let frontlinks;\n    try {\n        if (!allUrls) {\n            console.log(\"No backlinks available\");\n            return;\n        }\n        page_path = new URL(document.URL).pathname;\n        // Safe check for the URL in allUrls\n        if (!allUrls[page_path]) {\n            console.log(`Page ${page_path} not found in backlinks`);\n            return;\n        }\n        backlinks = allUrls[page_path]?.incoming_links;\n        frontlinks = allUrls[page_path]?.outgoing_links;\n        if (!backlinks && !frontlinks) {\n            console.log(`No backlinks for the page ${page_path}`);\n            return;\n        }\n    } catch (error) {\n        console.log(`Error processing links: ${error.message}`);\n        return;\n    }\n    let link_parent_location = $(\"#links-to-page\");\n    if (!link_parent_location || link_parent_location.length === 0) {\n        console.log(\"No back_link_location\");\n        return;\n    }\n    link_parent_location.append(`\n<ul class=\"nav nav-tabs nav-fill\" id=\"myTab\" role=\"tablist\">\n  <li class=\"nav-item\" role=\"presentation\">\n    <button class=\"nav-link active\" id=\"home-tab\" data-bs-toggle=\"tab\" data-bs-target=\"#incoming\" type=\"button\" role=\"tab\" aria-controls=\"incoming\" aria-selected=\"true\">Links to here</button>\n  </li>\n  <li class=\"nav-item\" role=\"presentation\">\n    <button class=\"nav-link\" id=\"profile-tab\" data-bs-toggle=\"tab\" data-bs-target=\"#outgoing\" type=\"button\" role=\"tab\" aria-controls=\"outgoing\" aria-selected=\"false\">Link from here</button>\n  </li>\n  <li class=\"nav-item\" role=\"presentation\">\n    <button class=\"nav-link\" id=\"profile-tab\" data-bs-toggle=\"tab\" data-bs-target=\"#graph\" type=\"button\" role=\"tab\" aria-controls=\"outgoing\" aria-selected=\"false\">Graph</button>\n  </li>\n</ul>\n<div class=\"tab-content\" id=\"myTabContent\">\n  <div class=\"tab-pane fade show active \" id=\"incoming\" role=\"tabpanel\" aria-labelledby=\"incoming-tab\"></div>\n  <div class=\"tab-pane fade\" id=\"outgoing\" role=\"tabpanel\" aria-labelledby=\"outgoing-tab\"></div>\n  <div class=\"tab-pane fade\" id=\"graph\" role=\"tabpanel\" aria-labelledby=\"outgoing-tab\">\n    <span> View the graph for: </span>\n  </div>\n</div>\n`);\n    let incoming_location = link_parent_location.find(\"#incoming\");\n    var sort_descending_by_size = (a, b)=>Number(allUrls[b].doc_size) - Number(allUrls[a].doc_size);\n    if (backlinks) for (var link of backlinks.sort(sort_descending_by_size)){\n        const url_info = allUrls[link];\n        incoming_location.append((0, $5c367f1c83ef0920$export$fc303307c4ed1d41)(url_info));\n    }\n    // remove front links not in\n    let clean_front_links = [];\n    for (var link of frontlinks)if (allUrls[link]) clean_front_links.push(link);\n    let outgoing_location = link_parent_location.find(\"#outgoing\");\n    if (clean_front_links) for (let link of clean_front_links.sort(sort_descending_by_size)){\n        const url_info = allUrls[link];\n        outgoing_location.append((0, $5c367f1c83ef0920$export$fc303307c4ed1d41)(url_info));\n    }\n    console.log(\"Added Graph\");\n    const graph_location = link_parent_location.find(\"#graph\");\n    const stripped_page_path = page_path.replace(/\\//g, \"\");\n    graph_location.append(`<a href='/graph#${stripped_page_path}'>${page_path} (${stripped_page_path}) </a>`);\n}\nfunction $417ebc8475d6fc5d$var$make_html_summary_link(link, url_info) {\n    if (!url_info) return $417ebc8475d6fc5d$var$make_html_summary_link_error(link, \"URL info is undefined\");\n    const url = url_info.url || '#';\n    const title = url_info.title || 'Untitled';\n    const description = url_info.description || 'No description available';\n    const attribution = `(From:<a href='${url}'> ${title}</a>)`;\n    return `<div>\n        <i> ${description}</i> ${attribution}\n    </div>`;\n}\nfunction $417ebc8475d6fc5d$var$make_html_summary_link_error(link, error) {\n    const href = link && link.attr ? link.attr(\"href\") : \"unknown\";\n    return `<span class='text-danger'>Error: Invalid link for ${href} ${error} </span>`;\n}\nfunction $417ebc8475d6fc5d$var$AddSummarysToPage(backLinks) {\n    if (!backLinks) {\n        console.log(\"No backlinks data available\");\n        return;\n    }\n    try {\n        const summary_links = $.makeArray($(\".summary-link\"));\n        if (!summary_links || summary_links.length === 0) {\n            console.log(\"No summary links found\");\n            return;\n        }\n        summary_links.forEach((raw_link)=>{\n            const link = $(raw_link);\n            try {\n                if (!link || !link.attr) {\n                    console.log(\"Invalid link element\");\n                    return;\n                }\n                console.log(link.attr(\"href\"));\n                let ref = link.attr(\"href\");\n                if (!ref) {\n                    link.html($417ebc8475d6fc5d$var$make_html_summary_link_error(link, \"missing href\"));\n                    return;\n                }\n                // Check if backLinks has necessary properties\n                if (!backLinks.redirects || !backLinks.url_info) {\n                    link.html($417ebc8475d6fc5d$var$make_html_summary_link_error(link, \"incomplete backLinks data\"));\n                    return;\n                }\n                // Resolve redirect\n                if (backLinks.redirects[ref] != undefined) ref = backLinks.redirects[ref];\n                // Look up in url info\n                if (backLinks.url_info[ref] == undefined) {\n                    link.html($417ebc8475d6fc5d$var$make_html_summary_link_error(link, \"not found in url info\"));\n                    return;\n                }\n                link.html($417ebc8475d6fc5d$var$make_html_summary_link(link, backLinks.url_info[ref]));\n            } catch (e) {\n                if (link && link.html) link.html($417ebc8475d6fc5d$var$make_html_summary_link_error(link, e));\n                else console.error(\"Error processing link and unable to display error:\", e);\n            }\n        });\n    } catch (error) {\n        console.error(\"Error processing summary links:\", error);\n    }\n}\nasync function $417ebc8475d6fc5d$var$add_link_loader() {\n    $417ebc8475d6fc5d$var$AddLinksToPage(await (0, $5c367f1c83ef0920$export$46c928bda6aa7b36)());\n    $417ebc8475d6fc5d$var$AddSummarysToPage(await $417ebc8475d6fc5d$var$get_back_links());\n}\nlet $417ebc8475d6fc5d$var$cached_back_links = null;\nasync function $417ebc8475d6fc5d$var$get_back_links() {\n    try {\n        if ($417ebc8475d6fc5d$var$cached_back_links != null) return $417ebc8475d6fc5d$var$cached_back_links;\n        const url = window.location.href;\n        const prodPrefix = \"https://idvork.in\";\n        const isProd = url.includes(prodPrefix);\n        var backlinks_url = \"\";\n        if (isProd) backlinks_url = \"https://raw.githubusercontent.com/idvorkin/idvorkin.github.io/master/back-links.json?flush_cache=True\";\n        else backlinks_url = \"/back-links.json\";\n        // Use a try/catch here in case $.getJSON fails\n        try {\n            const backlinksJson = await $.getJSON(backlinks_url);\n            // Ensure we have the required properties\n            if (!backlinksJson.redirects) backlinksJson.redirects = {};\n            if (!backlinksJson.url_info) backlinksJson.url_info = {};\n            $417ebc8475d6fc5d$var$cached_back_links = backlinksJson;\n            return $417ebc8475d6fc5d$var$cached_back_links;\n        } catch (error) {\n            console.error(\"Error fetching backlinks JSON:\", error);\n            return {\n                redirects: {},\n                url_info: {}\n            };\n        }\n    } catch (error) {\n        console.error(\"Error in get_back_links:\", error);\n        return {\n            redirects: {},\n            url_info: {}\n        };\n    }\n}\nfunction $417ebc8475d6fc5d$var$search() {\n    $(\"#autocomplete-search-box-button\").click();\n}\nfunction $417ebc8475d6fc5d$var$keyboard_shortcut_loader() {\n    const mouseTrap = Mousetrap();\n    mouseTrap.bind(\"s\", (e)=>$417ebc8475d6fc5d$var$search());\n    mouseTrap.bind(\"t\", (e)=>$417ebc8475d6fc5d$var$ForceShowRightSideBar());\n    mouseTrap.bind(\"p\", (e)=>$417ebc8475d6fc5d$var$SwapProdAndTest());\n    mouseTrap.bind(\"a\", (e)=>location.href = \"/all\");\n    mouseTrap.bind(\"m\", (e)=>location.href = \"/toc\");\n    mouseTrap.bind(\"6\", (e)=>location.href = \"/ig66\");\n    let shortcutHelp = `\nTry these shortcuts:\n  s - search\n  / - start chatting with others\n  t - force sidebar\n  p - swap prod and test\n  z - surprise me\n  a - all posts\n  m - global toc\n  6 - family journal\n  `;\n    mouseTrap.bind(\"?\", (e)=>alert(shortcutHelp));\n}\n/**\n * Replaces placeholder links in the document with their corresponding list content.\n * @param listReplacements - An object mapping placeholder texts to list elements.\n */ function $417ebc8475d6fc5d$var$replacePlaceholdersWithLists(listReplacements) {\n    Object.entries(listReplacements).forEach(([placeholderText, list])=>{\n        const placeholderLink = $(`a[href=${placeholderText}]`).first();\n        if (!placeholderLink.length) return; // Placeholder not found, skip\n        const listClone = $(list).clone();\n        if (listClone.children().length > 0) listClone.children().first().remove(); // Remove the 'lookup id' from the list\n        placeholderLink.replaceWith(listClone);\n        // remove the list from the document\n        $(list).remove();\n    });\n}\n/**\n * Builds a map of list replacements by scanning the document for specially formatted lists.\n * @returns An object where keys are placeholder texts and values are the corresponding list elements.\n */ function $417ebc8475d6fc5d$var$buildListReplacementMap() {\n    const replacements = {};\n    $(\"ul\").each((_, list)=>{\n        const firstListItem = list.firstElementChild;\n        if (!firstListItem) return;\n        const firstItemText = firstListItem.textContent;\n        if (!firstItemText || !firstItemText.startsWith(\"l\")) return;\n        const listId = parseInt(firstItemText.substring(1));\n        if (isNaN(listId)) return;\n        replacements[firstItemText] = list;\n    });\n    return replacements;\n}\n/**\n * Replaces list placeholders in tables with actual list content.\n * This function orchestrates the process of finding and replacing placeholders.\n */ function $417ebc8475d6fc5d$var$replaceListPlaceholdersInTables() {\n    console.log(\"\\uD83D\\uDD04 Replacing List Placeholders in Tables\");\n    const listReplacements = $417ebc8475d6fc5d$var$buildListReplacementMap();\n    $417ebc8475d6fc5d$var$replacePlaceholdersWithLists(listReplacements);\n}\nfunction $417ebc8475d6fc5d$export$38653e1d7f0b5689() {\n    $($417ebc8475d6fc5d$var$add_link_loader);\n    $($417ebc8475d6fc5d$var$keyboard_shortcut_loader);\n    // Replace list placeholders in tables\n    $(document).ready($417ebc8475d6fc5d$var$replaceListPlaceholdersInTables);\n    console.log(\"\\uD83D\\uDE80 About to call initRecentPosts from main.ts\");\n    (0, $3900136bb96a6238$export$95771618035e82ed)();\n    console.log(\"\\u2705 Called initRecentPosts from main.ts\");\n    // Initialize recent posts if the container exists\n    if (document.getElementById(\"last-modified-posts\")) {\n        console.log(\"\\uD83D\\uDE80 About to call initRecentAllPosts from main.ts\");\n        (0, $75f29f91bc155aaa$export$559328b3f08f1a41)();\n        console.log(\"\\u2705 Called initRecentAllPosts from main.ts\");\n    }\n    $(function() {\n        $417ebc8475d6fc5d$var$generateToc(\"ui-toc\", true);\n        $417ebc8475d6fc5d$var$generateToc(\"ui-toc-affix\", false);\n    });\n}\n\n\n// For autocomplete\n\nconst { autocomplete: $bd9399c7e2744abd$var$autocomplete, getAlgoliaResults: $bd9399c7e2744abd$var$getAlgoliaResults } = window[\"@algolia/autocomplete-js\"];\n// Adding a query paramater.\n// import instantsearch from \"algoliasearch\";\nconst $bd9399c7e2744abd$var$search_placeholder_text = \"Search Igor's Musings ...\";\nfunction $bd9399c7e2744abd$export$7a5418d73bdac342(name, url) {\n    if (!url) url = window.location.href;\n    name = name.replace(/[\\[\\]]/g, \"\\\\$&\");\n    var regex = new RegExp(\"[?&]\" + name + \"(=([^&#]*)|&|#|$)\"), results = regex.exec(url);\n    if (!results) return null;\n    if (!results[2]) return \"\";\n    return decodeURIComponent(results[2].replace(/\\+/g, \" \"));\n}\nfunction $bd9399c7e2744abd$var$InstantSearchHitTemplate(hit) {\n    // https://www.algolia.com/doc/api-reference/widgets/infinite-hits/js/\n    try {\n        let url = hit.url;\n        if (hit.anchor) url += `#${hit.anchor}`;\n        const highlighted = hit._highlightResult;\n        if (!highlighted) console.log(\"No Highlight\", hit);\n        const title = highlighted.title.value;\n        const content = highlighted?.content?.value ?? \"\";\n        // <section class=\"notepad-post-excerpt\"><p>${content}</p></section>\n        const string_rep = `\n           <span onClick=\"window.location='${url}';\">\n              <b> <a href=\"${url}\">${title}</a></b> <span>${content}</span>\n           </span>\n        `;\n        return string_rep;\n    } catch (err) {\n        console.log(\"Error in hitTemplate\", err, hit);\n    }\n    return \"invalid HTML\";\n}\nfunction $bd9399c7e2744abd$export$4b6f1157302970e2(appid, search_api_key, index_name, initial_query) {\n    // Instanciating InstantSearch.js with Algolia credentials\n    const searchClient = algoliasearch(appid, search_api_key);\n    const search = instantsearch({\n        searchClient: searchClient,\n        indexName: index_name,\n        searchParameters: {\n            query: initial_query\n        }\n    });\n    // Adding searchbar and results widgets\n    search.addWidget(// @ts-ignore:TS2339\n    instantsearch.widgets.searchBox({\n        container: \"#search-box\",\n        placeholder: $bd9399c7e2744abd$var$search_placeholder_text,\n        poweredBy: true,\n        showSubmit: false,\n        showReset: false,\n        showLoadingIndicator: false\n    }));\n    search.addWidget(// @ts-ignore:TS2339\n    instantsearch.widgets.infiniteHits({\n        container: \"#search-hits\",\n        templates: {\n            item: $bd9399c7e2744abd$var$InstantSearchHitTemplate\n        },\n        item ({ item: item }) {\n            return `Result: ${item.name}`;\n        }\n    }));\n    return search;\n}\n// Copied from the docs, but this isn't working for me.\nfunction $bd9399c7e2744abd$var$AutoCompleteHitTemplateWithComponentDoesNotWork({ item: item, components: components, createElement: createElement, fragments: fragments }) {\n    console.log(item);\n    return components.Highlight({\n        hit: item\n    });\n}\n// Algolia uses some PREACT thing, which this project does not support\n// Reach way into algolia and build the HTML manually\nfunction $bd9399c7e2744abd$var$AutoCompleteHitTemplate({ item: item, createElement: createElement }) {\n    // https://www.algolia.com/doc/api-reference/widgets/infinite-hits/js/\n    return createElement(\"div\", {\n        dangerouslySetInnerHTML: {\n            __html: $bd9399c7e2744abd$var$InstantSearchHitTemplate(item)\n        }\n    });\n}\nasync function $bd9399c7e2744abd$var$get_random_post() {\n    const all_url_info = await (0, $5c367f1c83ef0920$export$46c928bda6aa7b36)();\n    //  Yuk, find a clearere way to do this\n    const all_pages = Object.entries(all_url_info) // returns a list of [url, info]\n    .map((e)=>e[1]);\n    const random_post = (0, $5c367f1c83ef0920$export$f6f0b6976f5f23e5)(all_pages);\n    const ret = {\n        title: random_post[\"title\"],\n        url: random_post[\"url\"],\n        description: random_post[\"description\"]\n    };\n    return ret;\n}\n/**\n * Gets recent posts from the back-links.json file\n * Returns the specified number of most recently modified posts\n */ async function $bd9399c7e2744abd$var$get_recent_posts(count = 4) {\n    try {\n        const all_url_info = await (0, $5c367f1c83ef0920$export$46c928bda6aa7b36)();\n        // Convert to array of pages for easier processing\n        const pages = Object.entries(all_url_info).map(([url, metadata])=>({\n                url: url,\n                title: metadata.title || url,\n                description: metadata.description || \"\",\n                doc_size: metadata.doc_size || 0,\n                last_modified: metadata.last_modified || \"\"\n            }));\n        // Filter out pages that are likely redirects (these have empty descriptions and titles)\n        const realPages = pages.filter((page)=>page.description && page.description.trim() !== \"\" && page.title && page.title.trim() !== \"\");\n        // Sort by last_modified date (newest first)\n        const sortedPages = realPages.sort((a, b)=>{\n            if (a.last_modified && b.last_modified) return new Date(b.last_modified).getTime() - new Date(a.last_modified).getTime();\n            // Fallback to doc_size if last_modified is not available\n            return b.doc_size - a.doc_size;\n        });\n        // Take the top N most recent posts\n        return sortedPages.slice(0, count);\n    } catch (error) {\n        console.error(\"\\u274C Error loading recent posts:\", error);\n        return [];\n    }\n}\n/**\n * Gets random posts for search results\n * @param count Number of random posts to return (default: 3)\n */ async function $bd9399c7e2744abd$var$GetRandomSearchResults(count = 3) {\n    return {\n        sourceId: \"random_posts\",\n        async getItems () {\n            const sized_array = new Array(count).join(\"_\").split(\"_\");\n            const random_posts = await Promise.all(sized_array.map(async (e)=>$bd9399c7e2744abd$var$get_random_post()));\n            return random_posts;\n        },\n        getItemUrl ({ item: item }) {\n            const ret = item.url;\n            return ret;\n        },\n        templates: {\n            item ({ item: item, createElement: createElement }) {\n                return createElement(\"div\", {\n                    dangerouslySetInnerHTML: {\n                        __html: `\n            <span onClick=\"window.location='${item.url}';\" >\n           <b> <a href=\"${item.url}\">${item.title}</a></b>\n            <span>${item.description}</span>\n            </span>\n            `\n                    }\n                });\n            },\n            header ({ createElement: createElement }) {\n                return createElement(\"div\", {\n                    dangerouslySetInnerHTML: {\n                        __html: \"<i style='color:grey'>Random posts ...</i>\"\n                    }\n                });\n            }\n        }\n    };\n}\n/**\n * Gets recent posts for search results\n * @param count Number of recent posts to return (default: 4)\n */ async function $bd9399c7e2744abd$var$GetRecentSearchResults(count = 4) {\n    return {\n        sourceId: \"recent_posts\",\n        async getItems () {\n            const recentPosts = await $bd9399c7e2744abd$var$get_recent_posts(count);\n            return recentPosts;\n        },\n        getItemUrl ({ item: item }) {\n            const ret = item.url;\n            return ret;\n        },\n        templates: {\n            item ({ item: item, createElement: createElement }) {\n                return createElement(\"div\", {\n                    dangerouslySetInnerHTML: {\n                        __html: `\n            <span onClick=\"window.location='${item.url}';\" >\n           <b> <a href=\"${item.url}\">${item.title}</a></b>\n            <span>${item.description}</span>\n            </span>\n            `\n                    }\n                });\n            },\n            header ({ createElement: createElement }) {\n                return createElement(\"div\", {\n                    dangerouslySetInnerHTML: {\n                        __html: \"<i style='color:grey'>Recent posts ...</i>\"\n                    }\n                });\n            }\n        }\n    };\n}\n/**\n * Gets featured posts from Algolia search\n * @param searchClient Algolia search client\n * @param index_name Index name to search\n * @param query Search query\n * @param hitsPerPage Number of results to return (default: 3)\n * @param includeFamilyJournal Whether to include family journal posts\n */ function $bd9399c7e2744abd$var$GetAlgoliaResults(searchClient, index_name, query, hitsPerPage = 3, includeFamilyJournal = false) {\n    // By default don't include family journal.\n    let filter = \"NOT tags:family-journal\";\n    if (includeFamilyJournal) filter = \"\";\n    return {\n        sourceId: \"featured_posts\",\n        getItems () {\n            return $bd9399c7e2744abd$var$getAlgoliaResults({\n                searchClient: searchClient,\n                queries: [\n                    {\n                        indexName: index_name,\n                        query: query,\n                        filters: filter,\n                        params: {\n                            hitsPerPage: hitsPerPage,\n                            highlightPreTag: \"<span style='background:yellow'>\",\n                            highlightPostTag: \"</span>\"\n                        }\n                    }\n                ]\n            });\n        },\n        templates: {\n            item: $bd9399c7e2744abd$var$AutoCompleteHitTemplate,\n            header ({ createElement: createElement }) {\n                return createElement(\"div\", {\n                    dangerouslySetInnerHTML: {\n                        __html: \"<i style='color:grey'>Featured posts ...</i>\"\n                    }\n                });\n            }\n        },\n        getItemUrl ({ item: item }) {\n            let url = item.url;\n            if (item.anchor) url += `#${item.anchor}`;\n            const ret = url;\n            return ret;\n        }\n    };\n}\n/**\n * Creates an autocomplete search component\n * @param appid Algolia app ID\n * @param search_api_key Algolia search API key\n * @param index_name Algolia index name\n * @param autocomplete_id ID of the autocomplete element\n * @param includeFamilyJournal Whether to include family journal posts\n * @param featuredCount Number of featured posts to show (default: 3)\n * @param recentCount Number of recent posts to show (default: 4)\n * @param randomCount Number of random posts to show (default: 3)\n */ async function $bd9399c7e2744abd$export$b960629124c745df(appid, search_api_key, index_name, autocomplete_id, includeFamilyJournal, featuredCount = 3, recentCount = 4, randomCount = 3) {\n    const searchClient = algoliasearch(appid, search_api_key);\n    const randomSearchResults = await $bd9399c7e2744abd$var$GetRandomSearchResults(randomCount);\n    const recentSearchResults = await $bd9399c7e2744abd$var$GetRecentSearchResults(recentCount);\n    function GetSources({ query: query }) {\n        const isEmptySearch = query.length === 0;\n        if (isEmptySearch) // Searching for a space gives nice default results, so when no results search for that ...\n        query = \" \";\n        // Get featured posts (from Algolia search)\n        const featuredPosts = $bd9399c7e2744abd$var$GetAlgoliaResults(searchClient, index_name, query, isEmptySearch ? featuredCount : 10, includeFamilyJournal);\n        // For empty search, show featured, recent, and random posts\n        // For actual search, just show search results\n        if (isEmptySearch) return [\n            featuredPosts,\n            recentSearchResults,\n            randomSearchResults\n        ];\n        else return [\n            featuredPosts\n        ];\n    }\n    // Make sure we have the element\n    // autocomplete_id can be either '#id' or just 'id'\n    const elementId = autocomplete_id.startsWith(\"#\") ? autocomplete_id : `#${autocomplete_id}`;\n    if ($(elementId).length === 0) {\n        console.log(\"No autocomplete element found\", \"autocomplete_id\", autocomplete_id);\n        return;\n    }\n    // Setup Auto Complete Stuff\n    return $bd9399c7e2744abd$var$autocomplete({\n        container: elementId,\n        placeholder: $bd9399c7e2744abd$var$search_placeholder_text,\n        getSources: GetSources,\n        debug: false,\n        openOnFocus: true,\n        detachedMediaQuery: \"\"\n    });\n}\n\n\n\n// One of the imports is goofy\n// @ts-ignore:TS2792\n\nclass $6d425df71f5a07e7$export$2eba8ec3a333fdbb {\n    constructor({ name: name, value: value = 25, children: children = [] }){\n        this.name = name;\n        // Keep it interesting\n        this.children = (0, $5c367f1c83ef0920$export$448332262467e042)(children);\n        this.value = value;\n    }\n}\nfunction $6d425df71f5a07e7$export$859810117f914263(categoryToPromptsProvider = $6d425df71f5a07e7$export$f715474a449e7185, renderer = $6d425df71f5a07e7$export$3b78ee04d6f6b650) {\n    const map_category_to_prompts = categoryToPromptsProvider();\n    for (const category of map_category_to_prompts.keys())renderer(category, map_category_to_prompts.get(category));\n}\nfunction $6d425df71f5a07e7$export$3b78ee04d6f6b650(category, prompts_for_category, jQueryProvider = $, randomizerAppender = (0, $5c367f1c83ef0920$export$7691c4557333f2d2)) {\n    //print one of the prompts\n    let get_random_prompt_html = ()=>`<span>${(0, $5c367f1c83ef0920$export$f6f0b6976f5f23e5)(prompts_for_category)}</span><span style=\"float: right; cursor: pointer;\" title=\"Click for another prompt\">\\u{1F504}</span>`;\n    // add a place holder for random div.\n    const new_element = jQueryProvider(`<div class=\"alert alert-primary\" role=\"alert\"/>`);\n    jQueryProvider(category).after(new_element);\n    randomizerAppender(new_element, get_random_prompt_html);\n}\nfunction $6d425df71f5a07e7$export$f715474a449e7185(jQueryProvider = $) {\n    // prompt_categories are H3s with a UL under them, and the li's under there are the prompt.\n    const starting_node = jQueryProvider(\"h3\").first();\n    let current_category = starting_node;\n    let prompts_for_category = [];\n    let map_category_to_prompts = new Map();\n    for(let node = starting_node; node.length != 0; node = jQueryProvider(node).next()){\n        if (node.prop(\"tagName\") == \"H3\") {\n            // Build prompt map\n            map_category_to_prompts.set(current_category, prompts_for_category);\n            // start processing next categroy\n            current_category = node;\n            prompts_for_category = [];\n            continue;\n        }\n        // in a category, prompts are the children of the first unordered list, so skip\n        // stuff that isn't a list\n        if (node.prop(\"tagName\") != \"UL\") continue;\n        // we should now be the first list in the category\n        prompts_for_category = Array.from(jQueryProvider(node).find(\"li\")).map((li)=>jQueryProvider(li).text());\n    }\n    map_category_to_prompts.set(current_category, prompts_for_category);\n    return map_category_to_prompts;\n}\nfunction* $6d425df71f5a07e7$export$125d51429649aed5(node) {\n    if (!node) return;\n    let Q = [];\n    Q.push([\n        node,\n        null\n    ]);\n    while(Q.length > 0){\n        const [current, parent] = Q.shift();\n        for (const child of current.children ?? [])Q.push([\n            child,\n            current\n        ]);\n        yield [\n            current,\n            parent\n        ];\n    }\n}\nfunction $6d425df71f5a07e7$export$4fa03e2ac1e21ce8(root) {\n    // Plotly needs a tree to be flattened into a set of lists\n    // ids\n    // labels\n    // parents\n    // values\n    const names_parent_names = Array.from($6d425df71f5a07e7$export$125d51429649aed5(root)).map(([n, p])=>[\n            n.name,\n            p?.name\n        ]);\n    return {\n        ids: names_parent_names.map(([n, p])=>n),\n        labels: names_parent_names.map(([n, p])=>n),\n        parents: names_parent_names.map(([n, p])=>p)\n    };\n}\nfunction $6d425df71f5a07e7$export$e017c509fd729fbc(mapProvider = $6d425df71f5a07e7$export$f715474a449e7185) {\n    const map = mapProvider();\n    const list = Array.from(map.entries()).map(([k, v], _index)=>[\n            k.text(),\n            v\n        ]);\n    return new Map(list);\n}\nfunction $6d425df71f5a07e7$export$390791d65c97e7d4(label, tree_node, map_node_to_prompts) {\n    // Find the label in the tree\n    // recall bread first search returns a parent as well.\n    const [clicked_node, _parent] = Array.from($6d425df71f5a07e7$export$125d51429649aed5(tree_node)).find(([current, _parent])=>current.name == label);\n    // Gather all the prompts for the children of the clicked node.\n    let all_prompts = Array.from($6d425df71f5a07e7$export$125d51429649aed5(clicked_node)).map(([node, _parent])=>node) // returns node and parent\n    .filter((node)=>map_node_to_prompts.has(node.name)).map((node)=>map_node_to_prompts.get(node.name).map((prompt)=>`${node.name}: ${prompt}`)).flat();\n    return (0, $5c367f1c83ef0920$export$f6f0b6976f5f23e5)(all_prompts);\n}\nasync function $6d425df71f5a07e7$export$722c014d8e7c7fc6(plot_element_id, random_text_div_id, root, jQueryProvider = $, plotlyProvider = Plotly) {\n    if (!plotlyProvider) {\n        console.error(\"Plotly is not available\");\n        return;\n    }\n    const sunburst_tree_flat = $6d425df71f5a07e7$export$4fa03e2ac1e21ce8(root);\n    var sunburst_data = {\n        type: \"sunburst\",\n        outsidetextfont: {\n            size: 20,\n            color: \"#377eb8\"\n        },\n        // leaf: {opacity: 0.4},\n        hoverinfo: \"none\",\n        marker: {\n            line: {\n                width: 2\n            }\n        },\n        maxdepth: 2,\n        displayModeBar: false\n    };\n    Object.assign(sunburst_data, sunburst_tree_flat);\n    delete sunburst_data.values; // remove values to avoid sizing pie slices\n    var sunburst_layout = {\n        margin: {\n            l: 0,\n            r: 0,\n            b: 0,\n            t: 0\n        },\n        sunburstcolorway: [\n            \"#636efa\",\n            \"#ef553b\",\n            \"#00cc96\"\n        ]\n    };\n    const config = {\n        displayModeBar: false\n    };\n    try {\n        const sunburstPlot = await plotlyProvider.newPlot(plot_element_id, [\n            sunburst_data\n        ], sunburst_layout, config);\n        const set_random_prompt_text = (text)=>{\n            jQueryProvider(`#${random_text_div_id}`).text(text);\n        };\n        // Set click handler for div\n        jQueryProvider(`#${random_text_div_id}`).first().click(()=>{\n            const label = jQueryProvider(\"#sunburst text:first\").text(); // Hack should use an API to find center text\n            const prompt = $6d425df71f5a07e7$export$390791d65c97e7d4(label, root, $6d425df71f5a07e7$export$e017c509fd729fbc());\n            set_random_prompt_text(prompt);\n        });\n        sunburstPlot.on(\"plotly_sunburstclick\", (event)=>{\n            const label = event.points[0].label;\n            const prompt = $6d425df71f5a07e7$export$390791d65c97e7d4(label, root, $6d425df71f5a07e7$export$e017c509fd729fbc());\n            set_random_prompt_text(prompt);\n        });\n        return sunburstPlot;\n    } catch (error) {\n        console.error(\"Failed to create sunburst plot:\", error);\n        return null;\n    }\n}\nconst $6d425df71f5a07e7$export$66234fbc0455149c = {\n    breadth_first_walk: $6d425df71f5a07e7$export$125d51429649aed5,\n    shuffle: $5c367f1c83ef0920$export$448332262467e042\n};\n\n\n// Only include this in the html files, one per file\n// This allows code to seet things to refactor\n\n\n\nfunction $92ca6dc26425dcae$var$html_for_blogpost(post) {\n    const item = $(\"<div/>\");\n    // TODO: HACK: Strip to the right of Week number\n    const title_href = `<h4> <a href='${post.url}'}>${post.title}</a></h4>`;\n    const monthNames = [\n        \"January\",\n        \"February\",\n        \"March\",\n        \"April\",\n        \"May\",\n        \"June\",\n        \"July\",\n        \"August\",\n        \"September\",\n        \"October\",\n        \"November\",\n        \"December\"\n    ];\n    item.append(title_href);\n    // HACK: Upsize to larger thumbnail, seems like blogger auto resizes to include a 320 image as well.\n    const thumbnail_url = post.thumbnail.replace(\"s72-c\", \"s320\");\n    const published_date = new Date(post.published);\n    const excerptDisplayText = `\n    <div> ${monthNames[published_date.getMonth()]} ${published_date.getFullYear()} - ${post.excerpt}\n    </div>\n   `;\n    if (post.thumbnail != \"\") {\n        console.log(post.title);\n        console.log(published_date);\n        item.append(// `<div> <a href='${post.url}'}><img src='${thumbnail_url}'/></div>`\n        `\n      <div style='overflow:auto'>\n\n      <a href='${post.url}'}><img class=\"img-fluid\" style='float:left; margin-right:10px' src='${thumbnail_url}'/></a>\n      ${excerptDisplayText}\n      </div>`);\n    } else item.append(excerptDisplayText);\n    const ret = item.html();\n    return ret;\n}\nfunction $92ca6dc26425dcae$var$get_achievement_posts(imported_posts) {\n    return imported_posts.filter((post)=>post.title.toLowerCase().includes(\"achievement\"));\n}\nfunction $92ca6dc26425dcae$var$get_recent_posts(imported_posts) {\n    return imported_posts.filter((post)=>post.tags.includes(\"family-journal\"));\n}\nfunction $92ca6dc26425dcae$var$ProcessImports(posts) {\n    console.log(\"Processing\", posts.length, \"posts\");\n    if (!posts) {\n        console.log(`No posts being imported`);\n        return;\n    }\n    //\n    // Import all history\n    const random_div = \"#random-post\";\n    const achievement_div = \"#achievment\";\n    const random_recent = \"#random-recent\";\n    (0, $5c367f1c83ef0920$export$7691c4557333f2d2)(random_div, ()=>$92ca6dc26425dcae$var$html_for_blogpost((0, $5c367f1c83ef0920$export$f6f0b6976f5f23e5)(posts)));\n    // Add a random achievement post\n    (0, $5c367f1c83ef0920$export$7691c4557333f2d2)(achievement_div, ()=>$92ca6dc26425dcae$var$html_for_blogpost((0, $5c367f1c83ef0920$export$f6f0b6976f5f23e5)($92ca6dc26425dcae$var$get_achievement_posts(posts))));\n    (0, $5c367f1c83ef0920$export$7691c4557333f2d2)(random_recent, ()=>$92ca6dc26425dcae$var$html_for_blogpost((0, $5c367f1c83ef0920$export$f6f0b6976f5f23e5)($92ca6dc26425dcae$var$get_recent_posts(posts))));\n}\nfunction $92ca6dc26425dcae$export$42081a69ee292945() {\n    const imported_posts_url = \"/ig66/ig66-export.json\";\n    $.getJSON(imported_posts_url, $92ca6dc26425dcae$var$ProcessImports);\n}\nfunction $92ca6dc26425dcae$export$d5d79470c0eabcc3(role) {\n    // url encode the role title\n    const role_file_name = role.title.replace(/ /g, \"%20\");\n    const voices = [\n        \"igor\",\n        \"ammon\"\n    ];\n    const random_voice = voices[Math.floor(Math.random() * voices.length)];\n    // Yucky - toggle_play_pause is a global function in enjoy2.md - bleh,  so brittle\n    return `\n  <div>\n    <audio id=\"eulogy-player\">\n      <source src=\"https://github.com/idvorkin/blob/raw/master/read_eulogy/${random_voice}/${role_file_name}.mp3\" type=\"audio/mp3\">\n    </audio>\n  <b>${role.title} <a class='lead' onclick=\"toggle_play_pause('eulogy-player')\">\\u{1F508}</a></b> - ${role.summary}\n  </div>\n  `;\n}\nfunction $92ca6dc26425dcae$var$ProcessEulogy(div, roles) {\n    if (!roles) {\n        console.log(`No roles being imported`);\n        return;\n    }\n    console.log(\"Processing\", roles.roles.length, \"roles\");\n    // Import all history\n    (0, $5c367f1c83ef0920$export$7691c4557333f2d2)(div, ()=>$92ca6dc26425dcae$export$d5d79470c0eabcc3((0, $5c367f1c83ef0920$export$f6f0b6976f5f23e5)(roles.roles)));\n}\nfunction $92ca6dc26425dcae$export$13004ff06099531d(div) {\n    const imported_posts_url = \"/eulogy.json\";\n    $.getJSON(imported_posts_url, (roles)=>$92ca6dc26425dcae$var$ProcessEulogy(div, roles));\n}\n\n\nclass $9f283bd0ad425971$export$96d8ac85dbc3b083 {\n    /**\n   * Gets the tree structure for Seven Habits visualization\n   * @returns {TreeNode} The root node of the Seven Habits tree\n   */ get_tree() {\n        const root = new (0, $6d425df71f5a07e7$export$2eba8ec3a333fdbb)({\n            name: \"7H \",\n            children: [\n                new (0, $6d425df71f5a07e7$export$2eba8ec3a333fdbb)({\n                    name: \"\"\n                }),\n                new (0, $6d425df71f5a07e7$export$2eba8ec3a333fdbb)({\n                    name: \"Be Proactive\"\n                }),\n                new (0, $6d425df71f5a07e7$export$2eba8ec3a333fdbb)({\n                    name: \"Begin with the end in mind\"\n                }),\n                new (0, $6d425df71f5a07e7$export$2eba8ec3a333fdbb)({\n                    name: \"First things First\"\n                }),\n                new (0, $6d425df71f5a07e7$export$2eba8ec3a333fdbb)({\n                    name: \"Think Win/Win\"\n                }),\n                new (0, $6d425df71f5a07e7$export$2eba8ec3a333fdbb)({\n                    name: \"First Understand\"\n                }),\n                new (0, $6d425df71f5a07e7$export$2eba8ec3a333fdbb)({\n                    name: \"Synergize\"\n                }),\n                new (0, $6d425df71f5a07e7$export$2eba8ec3a333fdbb)({\n                    name: \"Sharpen the Saw\"\n                })\n            ]\n        });\n        return root;\n    }\n}\nclass $9f283bd0ad425971$export$9add44f13af82b94 {\n    /**\n   * Gets the tree structure for Things I Enjoy visualization\n   * @returns {TreeNode} The root node of the Things I Enjoy tree\n   */ get_tree() {\n        const health = new (0, $6d425df71f5a07e7$export$2eba8ec3a333fdbb)({\n            name: \"Health\",\n            children: [\n                {\n                    name: \"Physical\"\n                },\n                {\n                    name: \"Emotional\"\n                },\n                {\n                    name: \"Cognative\"\n                }\n            ],\n            value: 31\n        });\n        const magic = new (0, $6d425df71f5a07e7$export$2eba8ec3a333fdbb)({\n            name: \"Magic\",\n            children: [\n                new (0, $6d425df71f5a07e7$export$2eba8ec3a333fdbb)({\n                    name: \"Card Magic\"\n                }),\n                new (0, $6d425df71f5a07e7$export$2eba8ec3a333fdbb)({\n                    name: \"Coin Magic\"\n                }),\n                new (0, $6d425df71f5a07e7$export$2eba8ec3a333fdbb)({\n                    name: \"Band Magic\"\n                })\n            ]\n        });\n        const hobbies = new (0, $6d425df71f5a07e7$export$2eba8ec3a333fdbb)({\n            name: \"Hobbies\",\n            children: [\n                new (0, $6d425df71f5a07e7$export$2eba8ec3a333fdbb)({\n                    name: \"Biking\"\n                }),\n                new (0, $6d425df71f5a07e7$export$2eba8ec3a333fdbb)({\n                    name: \"Tech\"\n                }),\n                new (0, $6d425df71f5a07e7$export$2eba8ec3a333fdbb)({\n                    name: \"Juggling\"\n                })\n            ]\n        });\n        const relationships = new (0, $6d425df71f5a07e7$export$2eba8ec3a333fdbb)({\n            name: \"Relationships\",\n            children: [\n                new (0, $6d425df71f5a07e7$export$2eba8ec3a333fdbb)({\n                    name: \"Zach\"\n                }),\n                new (0, $6d425df71f5a07e7$export$2eba8ec3a333fdbb)({\n                    name: \"Amelia\"\n                }),\n                new (0, $6d425df71f5a07e7$export$2eba8ec3a333fdbb)({\n                    name: \"Tori\"\n                }),\n                new (0, $6d425df71f5a07e7$export$2eba8ec3a333fdbb)({\n                    name: \"Friends\"\n                })\n            ]\n        });\n        const joy = new (0, $6d425df71f5a07e7$export$2eba8ec3a333fdbb)({\n            name: \"Joy\",\n            children: [\n                new (0, $6d425df71f5a07e7$export$2eba8ec3a333fdbb)({\n                    name: \"Balloons\"\n                }),\n                new (0, $6d425df71f5a07e7$export$2eba8ec3a333fdbb)({\n                    name: \"Joy to Others\"\n                })\n            ]\n        });\n        return new (0, $6d425df71f5a07e7$export$2eba8ec3a333fdbb)({\n            name: \"Invest in\",\n            children: [\n                health,\n                magic,\n                hobbies,\n                relationships,\n                joy\n            ]\n        });\n    }\n}\nfunction $9f283bd0ad425971$export$2a7b436ba2130b9d({ url: url, title: title, description: description }) {\n    // TODO: HACK: Strip to the right of Week number\n    const title_href = `<a href='${url}'}>${title}</a>`;\n    // random id for audio player\n    const id = \"audio_player_\" + Math.floor(Math.random() * 10000000000);\n    // filename is URL with '/' turned to '_'\n    const filename = url.replace(/\\//g, \"_\");\n    return `\n    <div>\n        <audio id='${id}'>\n          <source src=\"https://github.com/idvorkin/blob/raw/master/url_info_voices/igor/${filename}.mp3\" type=\"audio/mp3\">\n        </audio>\n      ${title_href}:  <b><a class='lead' onclick=\"toggle_play_pause('${id}')\">\\u{1F508}</a></b> ${description}\n    </div>\n  `;\n}\nasync function $9f283bd0ad425971$export$43b8cbfc567b2b3c(linkInfoProvider = (0, $5c367f1c83ef0920$export$46c928bda6aa7b36), randomSelector = (0, $5c367f1c83ef0920$export$f6f0b6976f5f23e5)) {\n    try {\n        const all_url_info = await linkInfoProvider();\n        //  Yuk, find a clearere way to do this\n        const all_pages = Object.entries(all_url_info) // returns a list of [url, info]\n        .map((e)=>e[1]);\n        const random_post = randomSelector(all_pages);\n        return $9f283bd0ad425971$export$2a7b436ba2130b9d({\n            url: random_post[\"url\"],\n            title: random_post[\"title\"],\n            description: random_post[\"description\"]\n        });\n    } catch (error) {\n        console.error(\"Error generating random post HTML:\", error);\n        return \"<div>Could not load random post</div>\";\n    }\n}\nfunction $9f283bd0ad425971$export$a05fecdd139cc0d6(element1 = \"#e1\", element2 = \"#e2\", element3 = \"#e3\", eulogyLoader = (0, $92ca6dc26425dcae$export$13004ff06099531d)) {\n    try {\n        eulogyLoader(element1);\n        eulogyLoader(element2);\n        eulogyLoader(element3);\n    } catch (error) {\n        console.error(\"Error loading random eulogy:\", error);\n    }\n}\nfunction $9f283bd0ad425971$export$ed4ccdb0ea359d16(sunburstAdder = (0, $6d425df71f5a07e7$export$722c014d8e7c7fc6), promptsAdder = (0, $6d425df71f5a07e7$export$859810117f914263), postsAdder = (0, $92ca6dc26425dcae$export$42081a69ee292945), eulogyAdder = (0, $92ca6dc26425dcae$export$13004ff06099531d), randomizerAppender = (0, $5c367f1c83ef0920$export$7691c4557333f2d2)) {\n    try {\n        sunburstAdder(\"sunburst\", \"sunburst_text\", new $9f283bd0ad425971$export$9add44f13af82b94().get_tree());\n        promptsAdder();\n        postsAdder(); // has a random achievement post\n        eulogyAdder(\"#random-eulogy-role\");\n        randomizerAppender(\"#random-blog-posts\", $9f283bd0ad425971$export$43b8cbfc567b2b3c);\n    } catch (error) {\n        console.error(\"Error loading enjoy page:\", error);\n    }\n}\nfunction $9f283bd0ad425971$export$690b8256aeac9ddf(sunburstAdder = (0, $6d425df71f5a07e7$export$722c014d8e7c7fc6), promptsAdder = (0, $6d425df71f5a07e7$export$859810117f914263)) {\n    try {\n        sunburstAdder(\"sunburst\", \"sunburst_text\", new $9f283bd0ad425971$export$96d8ac85dbc3b083().get_tree());\n        promptsAdder();\n    } catch (error) {\n        console.error(\"Error loading 7 habits page:\", error);\n    }\n}\nfunction $9f283bd0ad425971$export$5971d3574f6a5694(postsAdder = (0, $92ca6dc26425dcae$export$42081a69ee292945)) {\n    try {\n        postsAdder();\n    } catch (error) {\n        console.error(\"Error loading IG66 page:\", error);\n    }\n}\nfunction $9f283bd0ad425971$export$be5467d8e644e939(restChartMaker = $9f283bd0ad425971$export$53e7a29c57fc33d2, workChartMaker = $9f283bd0ad425971$export$6bb9c0a936a9f448, radarMapMaker = $9f283bd0ad425971$export$8113f0fb50ea4947) {\n    try {\n        restChartMaker(\"balance-heatmap-rest\");\n        workChartMaker(\"balance-heatmap-work\");\n        radarMapMaker(\"balance-radar-map-ideal\");\n    } catch (error) {\n        console.error(\"Error loading balance page:\", error);\n    }\n}\nconst $9f283bd0ad425971$export$16352d1b10c5eb38 = [\n    \"Jan\",\n    \"Feb\",\n    \"Mar\",\n    \"Apr\",\n    \"May\",\n    \"June\",\n    \"July\",\n    \"Aug\",\n    \"Sep\",\n    \"Oct\",\n    \"Nov\",\n    \"Dec\"\n];\nconst $9f283bd0ad425971$export$90d9fe9646abdcf4 = 20;\nconst $9f283bd0ad425971$export$785c348110487d52 = 100;\nconst $9f283bd0ad425971$export$6b13b69749622324 = \"#00BF00\";\nasync function $9f283bd0ad425971$export$8113f0fb50ea4947(div, plotly) {\n    const data = [\n        {\n            type: \"scatterpolar\",\n            r: [\n                8,\n                8,\n                8,\n                5,\n                8,\n                8,\n                8\n            ],\n            theta: [\n                \"Work\",\n                \"Tech\",\n                \"Health\",\n                \"Hobbies\",\n                \"Relationships\",\n                \"Magic\",\n                \"Work\"\n            ],\n            name: \"2020 Goal\",\n            fill: \"toself\"\n        },\n        {\n            type: \"scatterpolar\",\n            r: [\n                7,\n                7,\n                5,\n                5,\n                5,\n                9,\n                7\n            ],\n            theta: [\n                \"Work\",\n                \"Tech\",\n                \"Health\",\n                \"Hobbies\",\n                \"Relationships\",\n                \"Magic\",\n                \"Work\"\n            ],\n            name: \"2020 Actual\",\n            fill: \"toself\"\n        }\n    ];\n    const layout = {\n        polar: {\n            radialaxis: {\n                visible: true,\n                range: [\n                    0,\n                    10\n                ]\n            }\n        },\n        showlegend: true\n    };\n    const config = {\n        displayModeBar: false\n    };\n    if (typeof plotly !== \"undefined\" && plotly) try {\n        await plotly.newPlot(div, data, layout, config);\n    } catch (error) {\n        console.error(\"Error creating radar map:\", error);\n    }\n    else console.warn(\"Plotly is not defined, skipping chart rendering\");\n}\nasync function $9f283bd0ad425971$export$6bb9c0a936a9f448(div, plotly) {\n    const roles = [\n        \"Tech\",\n        \"Work\"\n    ];\n    const layout = {\n        height: $9f283bd0ad425971$export$90d9fe9646abdcf4 * roles.length + $9f283bd0ad425971$export$785c348110487d52,\n        margin: {\n            t: 5\n        },\n        pad: 0\n    };\n    const color_scale = [\n        [\n            0.0,\n            \"darkblue\"\n        ],\n        [\n            0.4,\n            \"blue\"\n        ],\n        [\n            0.5,\n            $9f283bd0ad425971$export$6b13b69749622324\n        ],\n        [\n            0.6,\n            \"darkred\"\n        ],\n        [\n            1.0,\n            \"red\"\n        ]\n    ];\n    const gap_desire_over_time = [\n        [\n            7,\n            4,\n            7,\n            8,\n            2,\n            4,\n            2,\n            3,\n            2,\n            8\n        ],\n        [\n            10,\n            7,\n            5,\n            5,\n            3,\n            5,\n            6,\n            6,\n            7,\n            5\n        ]\n    ];\n    const data = [\n        {\n            colorscale: color_scale,\n            zmin: 0,\n            zmax: 10,\n            x: $9f283bd0ad425971$export$16352d1b10c5eb38.slice(2, 13),\n            y: roles,\n            z: gap_desire_over_time,\n            type: \"heatmap\"\n        }\n    ];\n    const config = {\n        displayModeBar: false\n    };\n    if (typeof plotly !== \"undefined\" && plotly) try {\n        await plotly.newPlot(div, data, layout, config);\n    } catch (error) {\n        console.error(\"Error creating work balance chart:\", error);\n    }\n    else console.warn(\"Plotly is not defined, skipping chart rendering\");\n}\nasync function $9f283bd0ad425971$export$53e7a29c57fc33d2(div, plotly) {\n    const roles = [\n        \"Health\",\n        \"Hobbies\",\n        \"Family\",\n        \"Magic\"\n    ];\n    const gap_desire_over_time = [\n        // J, F, M, A, M, J, J, A, S, O, N, D\n        [\n            4,\n            4,\n            3,\n            4,\n            5,\n            3,\n            2,\n            2,\n            3,\n            2\n        ],\n        [\n            4,\n            4,\n            3,\n            4,\n            5,\n            4,\n            4,\n            2,\n            4,\n            5\n        ],\n        [\n            2,\n            3,\n            3,\n            4,\n            1,\n            5,\n            4,\n            3,\n            2,\n            4\n        ],\n        [\n            5,\n            5,\n            5,\n            4,\n            5,\n            5,\n            4,\n            5,\n            4,\n            5\n        ]\n    ];\n    const color_scale = [\n        [\n            0.0,\n            \"red\"\n        ],\n        [\n            0.4,\n            \"darkred\"\n        ],\n        [\n            0.5,\n            $9f283bd0ad425971$export$6b13b69749622324\n        ],\n        [\n            0.6,\n            \"blue\"\n        ],\n        [\n            1.0,\n            \"darkblue\"\n        ]\n    ];\n    const data = [\n        {\n            colorscale: color_scale,\n            zmin: 0,\n            zmax: 10,\n            x: $9f283bd0ad425971$export$16352d1b10c5eb38.slice(2, 13),\n            y: roles.reverse(),\n            z: gap_desire_over_time.reverse(),\n            type: \"heatmap\"\n        }\n    ];\n    const config = {\n        displayModeBar: false\n    };\n    const layout = {\n        height: $9f283bd0ad425971$export$90d9fe9646abdcf4 * roles.length + $9f283bd0ad425971$export$785c348110487d52,\n        margin: {\n            t: 5\n        },\n        pad: 0\n    };\n    if (typeof plotly !== \"undefined\" && plotly) try {\n        await plotly.newPlot(div, data, layout, config);\n    } catch (error) {\n        console.error(\"Error creating rest time chart:\", error);\n    }\n    else console.warn(\"Plotly is not defined, skipping chart rendering\");\n}\nconst $9f283bd0ad425971$export$66234fbc0455149c = {\n    SevenHabits: $9f283bd0ad425971$export$96d8ac85dbc3b083,\n    ThingsIEnjoy: $9f283bd0ad425971$export$9add44f13af82b94\n};\n\n\n// Main initialization\n$(document).ready(function() {\n    // Initialize main functionality\n    let tocExpand = true;\n    // Call the global initialization function from main.ts\n    if (typeof defer === \"function\") defer((0, $417ebc8475d6fc5d$export$38653e1d7f0b5689));\n    else (0, $417ebc8475d6fc5d$export$38653e1d7f0b5689)();\n    // Setup event handlers\n    const setupKeyboardShortcuts = ()=>{\n        if (typeof Mousetrap !== \"undefined\") Mousetrap.bind(\"s\", ()=>focusSearch());\n    };\n    const focusSearch = ()=>{\n        const searchInput = $(\"#search-box\");\n        if (searchInput.length > 0) searchInput.focus();\n    };\n    // Initialize components\n    setupKeyboardShortcuts();\n    $9f9b9944cd5d5def$var$initializeTOC();\n    $9f9b9944cd5d5def$var$initializeSearch();\n    // Example usage of shared utilities\n    const items = [\n        \"item1\",\n        \"item2\",\n        \"item3\"\n    ];\n    console.log(\"Random item:\", (0, $5c367f1c83ef0920$export$f6f0b6976f5f23e5)(items));\n    console.log(\"Shuffled items:\", (0, $5c367f1c83ef0920$export$448332262467e042)([\n        ...items\n    ]));\n    // Initialize link loading\n    (0, $5c367f1c83ef0920$export$46c928bda6aa7b36)().then((links)=>{\n        console.log(\"Links loaded, count:\", Object.keys(links).length);\n    });\n    // Log successful initialization\n    console.log(\"Blog JavaScript initialized\");\n});\n// Initialize TOC\nfunction $9f9b9944cd5d5def$var$initializeTOC() {\n    const tocElement = $(\"#toc-content\");\n    if (tocElement.length > 0) // TOC initialization code\n    console.log(\"TOC initialized\");\n}\n// Initialize search\nfunction $9f9b9944cd5d5def$var$initializeSearch() {\n    const searchElement = $(\"#search-box\");\n    if (searchElement.length > 0) // Search initialization code\n    console.log(\"Search initialized\");\n}\n\n\nexport {$5c367f1c83ef0920$export$f6f0b6976f5f23e5 as random_from_list, $5c367f1c83ef0920$export$448332262467e042 as shuffle, $5c367f1c83ef0920$export$7691c4557333f2d2 as append_randomizer_div, $5c367f1c83ef0920$export$46c928bda6aa7b36 as get_link_info, $417ebc8475d6fc5d$export$38653e1d7f0b5689 as load_globals, $5c367f1c83ef0920$export$fc303307c4ed1d41 as MakeBackLinkHTML, $bd9399c7e2744abd$export$b960629124c745df as CreateAutoComplete, $75f29f91bc155aaa$export$559328b3f08f1a41 as initRecentAllPosts, $6d425df71f5a07e7$export$859810117f914263 as add_random_prompts, $6d425df71f5a07e7$export$722c014d8e7c7fc6 as add_sunburst, $6d425df71f5a07e7$export$2eba8ec3a333fdbb as TreeNode, $9f283bd0ad425971$export$ed4ccdb0ea359d16 as load_enjoy2, $9f283bd0ad425971$export$690b8256aeac9ddf as load_7_habits, $9f283bd0ad425971$export$2a7b436ba2130b9d as makePostPreviewHTML, $9f283bd0ad425971$export$5971d3574f6a5694 as load_ig66, $9f283bd0ad425971$export$be5467d8e644e939 as load_balance, $9f283bd0ad425971$export$a05fecdd139cc0d6 as load_random_eulogy};\n//# sourceMappingURL=index.js.map\n","/**\n * Main JavaScript Entry Point\n *\n * This file serves as the single entry point for all JavaScript functionality\n * on the blog. It imports and initializes all necessary modules.\n */\n\n// Import shared utilities\nimport {\n  random_from_list,\n  shuffle,\n  append_randomizer_div,\n  get_link_info,\n  MakeBackLinkHTML,\n  type IURLInfo,\n  type IURLInfoMap,\n} from \"./shared\";\n\n// Import main functionality\nimport { load_globals } from \"./main\";\n\n// Import search functionality\nimport { CreateAutoComplete } from \"./search\";\n\n// Import recent posts functionality\nimport { initRecentAllPosts } from \"./recent\";\n\n// Import random-prompter functionality\nimport { add_random_prompts, add_sunburst, TreeNode } from \"./random-prompter\";\n\n// Import page-loader functionality\nimport {\n  load_enjoy2,\n  load_7_habits,\n  makePostPreviewHTML,\n  load_ig66,\n  load_balance,\n  load_random_eulogy,\n} from \"./page-loader\";\n\n// Declare global variables from external libraries\ndeclare var $: any;\ndeclare var Mousetrap: any;\ndeclare global {\n  function defer(fn: Function): void;\n}\n\n// Main initialization\n$(document).ready(function () {\n  // Initialize main functionality\n  let tocExpand = true;\n\n  // Call the global initialization function from main.ts\n  if (typeof defer === \"function\") {\n    defer(load_globals);\n  } else {\n    load_globals();\n  }\n\n  // Setup event handlers\n  const setupKeyboardShortcuts = () => {\n    if (typeof Mousetrap !== \"undefined\") {\n      Mousetrap.bind(\"s\", () => focusSearch());\n      // Add other keyboard shortcuts as needed\n    }\n  };\n\n  const focusSearch = () => {\n    const searchInput = $(\"#search-box\");\n    if (searchInput.length > 0) {\n      searchInput.focus();\n    }\n  };\n\n  // Initialize components\n  setupKeyboardShortcuts();\n  initializeTOC();\n  initializeSearch();\n\n  // Example usage of shared utilities\n  const items = [\"item1\", \"item2\", \"item3\"];\n  console.log(\"Random item:\", random_from_list(items));\n  console.log(\"Shuffled items:\", shuffle([...items]));\n\n  // Initialize link loading\n  get_link_info().then(links => {\n    console.log(\"Links loaded, count:\", Object.keys(links).length);\n  });\n\n  // Log successful initialization\n  console.log(\"Blog JavaScript initialized\");\n});\n\n// Initialize TOC\nfunction initializeTOC() {\n  const tocElement = $(\"#toc-content\");\n  if (tocElement.length > 0) {\n    // TOC initialization code\n    console.log(\"TOC initialized\");\n  }\n}\n\n// Initialize search\nfunction initializeSearch() {\n  const searchElement = $(\"#search-box\");\n  if (searchElement.length > 0) {\n    // Search initialization code\n    console.log(\"Search initialized\");\n  }\n}\n\n// Export shared utilities and main functions for potential direct use\nexport {\n  random_from_list,\n  shuffle,\n  append_randomizer_div,\n  get_link_info,\n  // Export the interface types\n  type IURLInfo,\n  type IURLInfoMap,\n  load_globals,\n  MakeBackLinkHTML,\n  CreateAutoComplete,\n  // Recent posts export\n  initRecentAllPosts,\n  // Random prompter exports\n  add_random_prompts,\n  add_sunburst,\n  TreeNode,\n  // Page loader exports\n  load_enjoy2,\n  load_7_habits,\n  makePostPreviewHTML,\n  load_ig66,\n  load_balance,\n  load_random_eulogy,\n};\n","/**\n * Shared utility functions\n *\n * This file contains utility functions that are shared across multiple modules.\n */\n\n/**\n * Creates HTML for a backlink\n */\nexport function MakeBackLinkHTML(url_info: IURLInfo) {\n  const title_href = `<a href=${url_info.url}>${url_info.title}</a>`;\n  const class_link = `link-box description truncate-css`;\n  const output = `\n<div>\n    <div class=\"${class_link}\"> ${title_href}:<span class=\"link-description\"> ${url_info.description} <span></div>\n</div>`;\n  return output;\n}\n\n/**\n * Returns a random element from an array\n */\nexport function random_from_list<T>(list: T[]): T {\n  if (list.length === 0) return undefined;\n  return list[Math.floor(Math.random() * list.length)];\n}\n\n/**\n * Shuffles an array in place\n * https://stackoverflow.com/questions/2450954/how-to-randomize-shuffle-a-javascript-array\n */\nexport function shuffle<T>(array: T[]): T[] {\n  let currentIndex = array.length,\n    randomIndex;\n\n  // While there remain elements to shuffle.\n  while (currentIndex != 0) {\n    // Pick a remaining element.\n    randomIndex = Math.floor(Math.random() * currentIndex);\n    currentIndex--;\n\n    // And swap it with the current element.\n    [array[currentIndex], array[randomIndex]] = [\n      array[randomIndex],\n      array[currentIndex],\n    ];\n  }\n\n  return array;\n}\n\n/**\n * This div gets content from the random_html_factory\n * and clicking does a re-randomize\n */\nexport async function append_randomizer_div(\n  parent_id: string | JQuery<HTMLElement>,\n  random_html_factory: () => string\n) {\n  // as string to queit type checker.\n  // Will be a noop if parent_id is already a jquery object\n  const $parent = $(parent_id as string);\n  if ($parent.length != 1) {\n    console.log(`append_randomizer_div ${parent_id} not present`);\n    return;\n  }\n  const new_element = $(await random_html_factory());\n  $parent.empty().append(new_element);\n\n  // Clicking on the element should result in a reload, unless you're\n  // Clicking on a link\n  $parent.click(async function (event) {\n    if (event.target.tagName != \"A\") {\n      const new_element = $(await random_html_factory());\n      $parent.empty().append(new_element);\n    }\n  });\n}\n\nexport interface IURLInfoMap {\n  [key: string]: IURLInfo;\n}\n\nexport interface IURLInfo {\n  url: string;\n  title: string;\n  description: string;\n  file_path: string;\n  outgoing_links: string[];\n  incoming_links: string[];\n  redirect_url: string;\n  doc_size: number;\n  last_modified: string;\n}\n\nlet cached_link_info: IURLInfoMap = null;\n\n/**\n * Gets link information from the back-links.json file\n */\nexport async function get_link_info(url?: string): Promise<IURLInfoMap> {\n  if (cached_link_info != null) {\n    return cached_link_info;\n  }\n  const current_url = url || window.location.href;\n  const prodPrefix = \"https://idvork.in\";\n  const isProd = current_url.includes(prodPrefix);\n\n  var backlinks_url =\n    \"https://raw.githubusercontent.com/idvorkin/idvorkin.github.io/master/back-links.json?flush_cache=True\";\n\n  if (!isProd) {\n    backlinks_url = \"/back-links.json\";\n  }\n\n  try {\n    const response = await fetch(backlinks_url);\n    const data = await response.json();\n    cached_link_info = data.url_info;\n    return cached_link_info;\n  } catch (e) {\n    console.error(\"Error fetching link info\", e);\n    return {};\n  }\n}\n","// Import shared functions\nimport {\n  random_from_list,\n  shuffle,\n  append_randomizer_div,\n  get_link_info,\n  MakeBackLinkHTML,\n  IURLInfo,\n  IURLInfoMap,\n} from \"./shared\";\n\nimport { initRecentPosts } from \"./recent-posts\";\nimport { initRecentAllPosts } from \"./recent\";\nimport \"./graph\";\n\nlet tocExpand = true;\n\nfunction checkExpandToggle() {\n  const toc = $(\".ui-toc-dropdown .toc\");\n  const toggle = $(\".expand-toggle\");\n\n  if (toc.length === 0 || toggle.length === 0) {\n    console.warn(\"TOC or toggle elements not found for expand/collapse\");\n    return;\n  }\n\n  if (!tocExpand) {\n    toc.removeClass(\"expand\");\n    toggle.text(\"Expand all\");\n  } else {\n    toc.addClass(\"expand\");\n    toggle.text(\"Collapse all\");\n  }\n}\n\nfunction SwapProdAndTest() {\n  /* Find page title. */\n  const url = window.location.href;\n  const prodPrefix = \"https://idvork.in\";\n  const testPrefix = \"http://localhost:4000\";\n  const isProd = url.includes(prodPrefix);\n  let newURL = url;\n  if (isProd) {\n    newURL = url.replace(prodPrefix, testPrefix);\n  } else {\n    newURL = url.replace(testPrefix, prodPrefix);\n  }\n\n  window.location.href = newURL;\n}\n\nfunction ForceShowRightSideBar() {\n  let toc = $(\"#right-sidebar\");\n  let mainContent = $(\"#main-content\");\n\n  if (toc.length > 0) {\n    toc.removeClass();\n    toc.addClass(\"col-4 pl-0\");\n  }\n\n  if (mainContent.length > 0) {\n    mainContent.removeClass();\n    mainContent.addClass(\"col-8 pr-0\");\n  }\n\n  // Hide DropUp\n  const tocDropUp = $(\"#id-ui-toc-dropdown\");\n  if (tocDropUp.length > 0) {\n    tocDropUp.removeClass();\n    tocDropUp.addClass(\"d-none\");\n  }\n}\n\n// <!-- Copied from hackmd-extras.js -->\nfunction generateToc(id, showPinToc) {\n  const target = $(`#${id}`);\n  if (target.length === 0) {\n    console.warn(`Target element #${id} not found for TOC generation`);\n    return;\n  }\n\n  target.html(\"\");\n\n  // Check if content-holder exists\n  if ($(\"#content-holder\").length === 0) {\n    console.warn(\"Content holder not found for TOC generation\");\n    return;\n  }\n\n  /* eslint-disable no-unused-vars */\n  /* @ts-ignore:TS2339*/\n  const toc = new window.Toc(\"content-holder\", {\n    level: 3,\n    top: -1,\n    class: \"toc\",\n    ulClass: \"nav\",\n    targetId: id,\n  });\n  /* eslint-enable no-unused-vars */\n  if (target.text() === \"undefined\") {\n    target.html(\"\");\n  }\n  const tocMenu = $('<div class=\"toc-menu\"></div');\n  const toggle = $('<a class=\"expand-toggle\" href=\"#\">Collapse all</a>');\n  const backToTop = $('<a class=\"back-to-top\" href=\"#\">Top of page</a>');\n  const gotoBottom = $('<a class=\"go-to-bottom\" href=\"#\">Bottom of page</a>');\n  const forceSideBar = $('<a class=\"go-to-bottom\" href=\"#\">Pin ToC</a>');\n  checkExpandToggle();\n  toggle.click(e => {\n    e.preventDefault();\n    e.stopPropagation();\n    tocExpand = !tocExpand;\n    checkExpandToggle();\n  });\n  backToTop.click(e => {\n    e.preventDefault();\n    e.stopPropagation();\n    window.scrollTo(0, 0);\n  });\n  gotoBottom.click(e => {\n    e.preventDefault();\n    e.stopPropagation();\n    window.scrollTo(0, document.body.scrollHeight);\n  });\n  forceSideBar.click(e => ForceShowRightSideBar());\n  tocMenu.append(toggle).append(backToTop).append(gotoBottom);\n  if (showPinToc) {\n    tocMenu.append(forceSideBar);\n  }\n  target.append(tocMenu);\n}\n\n// MakeBackLinkHTML moved to shared.ts\n\nasync function AddLinksToPage(allUrls: IURLInfoMap) {\n  // TODO handle redirects\n  let page_path: string;\n  let backlinks: string[] | undefined;\n  let frontlinks: string[] | undefined;\n  \n  try {\n    if (!allUrls) {\n      console.log(\"No backlinks available\");\n      return;\n    }\n    \n    page_path = new URL(document.URL).pathname;\n    \n    // Safe check for the URL in allUrls\n    if (!allUrls[page_path]) {\n      console.log(`Page ${page_path} not found in backlinks`);\n      return;\n    }\n    \n    backlinks = allUrls[page_path]?.incoming_links;\n    frontlinks = allUrls[page_path]?.outgoing_links;\n\n    if (!backlinks && !frontlinks) {\n      console.log(`No backlinks for the page ${page_path}`);\n      return;\n    }\n  } catch (error) {\n    console.log(`Error processing links: ${error.message}`);\n    return;\n  }\n  \n  let link_parent_location = $(\"#links-to-page\");\n  if (!link_parent_location || link_parent_location.length === 0) {\n    console.log(\"No back_link_location\");\n    return;\n  }\n\n  link_parent_location.append(\n    `\n<ul class=\"nav nav-tabs nav-fill\" id=\"myTab\" role=\"tablist\">\n  <li class=\"nav-item\" role=\"presentation\">\n    <button class=\"nav-link active\" id=\"home-tab\" data-bs-toggle=\"tab\" data-bs-target=\"#incoming\" type=\"button\" role=\"tab\" aria-controls=\"incoming\" aria-selected=\"true\">Links to here</button>\n  </li>\n  <li class=\"nav-item\" role=\"presentation\">\n    <button class=\"nav-link\" id=\"profile-tab\" data-bs-toggle=\"tab\" data-bs-target=\"#outgoing\" type=\"button\" role=\"tab\" aria-controls=\"outgoing\" aria-selected=\"false\">Link from here</button>\n  </li>\n  <li class=\"nav-item\" role=\"presentation\">\n    <button class=\"nav-link\" id=\"profile-tab\" data-bs-toggle=\"tab\" data-bs-target=\"#graph\" type=\"button\" role=\"tab\" aria-controls=\"outgoing\" aria-selected=\"false\">Graph</button>\n  </li>\n</ul>\n<div class=\"tab-content\" id=\"myTabContent\">\n  <div class=\"tab-pane fade show active \" id=\"incoming\" role=\"tabpanel\" aria-labelledby=\"incoming-tab\"></div>\n  <div class=\"tab-pane fade\" id=\"outgoing\" role=\"tabpanel\" aria-labelledby=\"outgoing-tab\"></div>\n  <div class=\"tab-pane fade\" id=\"graph\" role=\"tabpanel\" aria-labelledby=\"outgoing-tab\">\n    <span> View the graph for: </span>\n  </div>\n</div>\n`\n  );\n\n  let incoming_location = link_parent_location.find(\"#incoming\");\n  var sort_descending_by_size = (a, b) =>\n    Number(allUrls[b].doc_size) - Number(allUrls[a].doc_size);\n\n  if (backlinks) {\n    for (var link of backlinks.sort(sort_descending_by_size)) {\n      const url_info = allUrls[link];\n      incoming_location.append(MakeBackLinkHTML(url_info));\n    }\n  }\n\n  // remove front links not in\n  let clean_front_links = [];\n  for (var link of frontlinks) {\n    if (allUrls[link]) {\n      clean_front_links.push(link);\n    }\n  }\n\n  let outgoing_location = link_parent_location.find(\"#outgoing\");\n  if (clean_front_links) {\n    for (let link of clean_front_links.sort(sort_descending_by_size)) {\n      const url_info = allUrls[link];\n      outgoing_location.append(MakeBackLinkHTML(url_info));\n    }\n  }\n  console.log(\"Added Graph\");\n  const graph_location = link_parent_location.find(\"#graph\");\n  const stripped_page_path = page_path.replace(/\\//g, \"\");\n  graph_location.append(\n    `<a href='/graph#${stripped_page_path}'>${page_path} (${stripped_page_path}) </a>`\n  );\n}\nfunction make_html_summary_link(link, url_info: IURLInfo) {\n  if (!url_info) {\n    return make_html_summary_link_error(link, \"URL info is undefined\");\n  }\n  \n  const url = url_info.url || '#';\n  const title = url_info.title || 'Untitled';\n  const description = url_info.description || 'No description available';\n  \n  const attribution = `(From:<a href='${url}'> ${title}</a>)`;\n\n  return `<div>\n        <i> ${description}</i> ${attribution}\n    </div>`;\n}\n\nfunction make_html_summary_link_error(link, error) {\n  const href = link && link.attr ? link.attr(\"href\") : \"unknown\";\n  return `<span class='text-danger'>Error: Invalid link for ${href} ${error} </span>`;\n}\n\nfunction AddSummarysToPage(backLinks: IBacklinks) {\n  if (!backLinks) {\n    console.log(\"No backlinks data available\");\n    return;\n  }\n  \n  try {\n    const summary_links = $.makeArray($(\".summary-link\"));\n    \n    if (!summary_links || summary_links.length === 0) {\n      console.log(\"No summary links found\");\n      return;\n    }\n    \n    summary_links.forEach(raw_link => {\n      const link = $(raw_link);\n      try {\n        if (!link || !link.attr) {\n          console.log(\"Invalid link element\");\n          return;\n        }\n        \n        console.log(link.attr(\"href\"));\n        \n        let ref = link.attr(\"href\");\n        if (!ref) {\n          link.html(make_html_summary_link_error(link, \"missing href\"));\n          return;\n        }\n        \n        // Check if backLinks has necessary properties\n        if (!backLinks.redirects || !backLinks.url_info) {\n          link.html(make_html_summary_link_error(link, \"incomplete backLinks data\"));\n          return;\n        }\n  \n        // Resolve redirect\n        if (backLinks.redirects[ref] != undefined) {\n          ref = backLinks.redirects[ref];\n        }\n        \n        // Look up in url info\n        if (backLinks.url_info[ref] == undefined) {\n          link.html(make_html_summary_link_error(link, \"not found in url info\"));\n          return;\n        }\n  \n        link.html(make_html_summary_link(link, backLinks.url_info[ref]));\n      } catch (e) {\n        if (link && link.html) {\n          link.html(make_html_summary_link_error(link, e));\n        } else {\n          console.error(\"Error processing link and unable to display error:\", e);\n        }\n      }\n    });\n  } catch (error) {\n    console.error(\"Error processing summary links:\", error);\n  }\n}\n\nasync function add_link_loader() {\n  AddLinksToPage(await get_link_info());\n  AddSummarysToPage(await get_back_links());\n}\n\nexport interface IBacklinks {\n  redirects: { [key: string]: string };\n  url_info: IURLInfoMap;\n}\n\nlet cached_back_links: IBacklinks = null;\nasync function get_back_links(): Promise<IBacklinks> {\n  try {\n    if (cached_back_links != null) {\n      return cached_back_links;\n    }\n    \n    const url = window.location.href;\n    const prodPrefix = \"https://idvork.in\";\n    const isProd = url.includes(prodPrefix);\n\n    var backlinks_url = \"\";\n    if (isProd) {\n      backlinks_url =\n        \"https://raw.githubusercontent.com/idvorkin/idvorkin.github.io/master/back-links.json?flush_cache=True\";\n    } else {\n      backlinks_url = \"/back-links.json\";\n    }\n\n    // Use a try/catch here in case $.getJSON fails\n    try {\n      const backlinksJson = (await ($.getJSON(backlinks_url) as any)) as IBacklinks;\n      \n      // Ensure we have the required properties\n      if (!backlinksJson.redirects) backlinksJson.redirects = {};\n      if (!backlinksJson.url_info) backlinksJson.url_info = {};\n      \n      cached_back_links = backlinksJson;\n      return cached_back_links;\n    } catch (error) {\n      console.error(\"Error fetching backlinks JSON:\", error);\n      return { redirects: {}, url_info: {} };\n    }\n  } catch (error) {\n    console.error(\"Error in get_back_links:\", error);\n    return { redirects: {}, url_info: {} };\n  }\n}\n\nfunction search() {\n  $(\"#autocomplete-search-box-button\").click();\n}\n\nfunction keyboard_shortcut_loader() {\n  const mouseTrap: any = Mousetrap();\n  mouseTrap.bind(\"s\", e => search());\n  mouseTrap.bind(\"t\", e => ForceShowRightSideBar());\n  mouseTrap.bind(\"p\", e => SwapProdAndTest());\n  mouseTrap.bind(\"a\", e => (location.href = \"/all\"));\n  mouseTrap.bind(\"m\", e => (location.href = \"/toc\"));\n  mouseTrap.bind(\"6\", e => (location.href = \"/ig66\"));\n\n  let shortcutHelp = `\nTry these shortcuts:\n  s - search\n  / - start chatting with others\n  t - force sidebar\n  p - swap prod and test\n  z - surprise me\n  a - all posts\n  m - global toc\n  6 - family journal\n  `;\n  mouseTrap.bind(\"?\", e => alert(shortcutHelp));\n}\n\n/**\n * Replaces placeholder links in the document with their corresponding list content.\n * @param listReplacements - An object mapping placeholder texts to list elements.\n */\nfunction replacePlaceholdersWithLists(\n  listReplacements: Record<string, Element>\n) {\n  Object.entries(listReplacements).forEach(([placeholderText, list]) => {\n    const placeholderLink = $(`a[href=${placeholderText}]`).first();\n    if (!placeholderLink.length) return; // Placeholder not found, skip\n\n    const listClone = $(list).clone();\n    if (listClone.children().length > 0) {\n      listClone.children().first().remove(); // Remove the 'lookup id' from the list\n    }\n    placeholderLink.replaceWith(listClone);\n\n    // remove the list from the document\n    $(list).remove();\n  });\n}\n\n/**\n * Builds a map of list replacements by scanning the document for specially formatted lists.\n * @returns An object where keys are placeholder texts and values are the corresponding list elements.\n */\nfunction buildListReplacementMap(): Record<string, Element> {\n  const replacements: Record<string, Element> = {};\n  $(\"ul\").each((_, list) => {\n    const firstListItem = list.firstElementChild;\n    if (!firstListItem) return;\n\n    const firstItemText = firstListItem.textContent;\n    if (!firstItemText || !firstItemText.startsWith(\"l\")) return;\n\n    const listId = parseInt(firstItemText.substring(1));\n    if (isNaN(listId)) return;\n\n    replacements[firstItemText] = list;\n  });\n  return replacements;\n}\n\n/**\n * Replaces list placeholders in tables with actual list content.\n * This function orchestrates the process of finding and replacing placeholders.\n */\nfunction replaceListPlaceholdersInTables() {\n  console.log(\" Replacing List Placeholders in Tables\");\n  const listReplacements = buildListReplacementMap();\n  replacePlaceholdersWithLists(listReplacements);\n}\n\nfunction load_globals() {\n  $(add_link_loader);\n  $(keyboard_shortcut_loader);\n\n  // Replace list placeholders in tables\n  $(document).ready(replaceListPlaceholdersInTables);\n\n  console.log(\" About to call initRecentPosts from main.ts\");\n  initRecentPosts();\n  console.log(\" Called initRecentPosts from main.ts\");\n\n  // Initialize recent posts if the container exists\n  if (document.getElementById(\"last-modified-posts\")) {\n    console.log(\" About to call initRecentAllPosts from main.ts\");\n    initRecentAllPosts();\n    console.log(\" Called initRecentAllPosts from main.ts\");\n  }\n\n  $(function () {\n    generateToc(\"ui-toc\", true);\n    generateToc(\"ui-toc-affix\", false);\n  });\n}\n\nexport {\n  load_globals,\n  get_link_info,\n  shuffle,\n  random_from_list,\n  append_randomizer_div,\n};\n","/**\n * Recent Posts Display Module\n *\n * Fetches and displays the most recently modified posts\n * from the backlinks.json file.\n */\n\nimport { IPage, getProcessedPages } from \"./recent-posts-shared\";\n\n/**\n * Takes a slice of the most recent pages.\n * @param pages The array of sorted pages\n * @param count The number of recent pages to take\n * @returns The array of most recent pages\n */\nexport function getRecentPages(pages: IPage[], count = 5): IPage[] {\n  return pages.slice(0, count);\n}\n\n/**\n * Generates HTML for the recent pages.\n * @param recentPages The array of recent pages\n * @returns The HTML string\n */\nexport function generateRecentPagesHTML(recentPages: IPage[]): string {\n  if (recentPages.length === 0) {\n    return \"<p>No recent posts found.</p>\";\n  }\n\n  return `\n    <ul>\n      ${recentPages\n        .map(\n          page => `\n        <li>\n          <a href=\"${page.url}\">${page.title}</a> - \n          ${page.description.split(\"\\n\")[0].substring(0, 100)}${\n            page.description.length > 100 ? \"...\" : \"\"\n          }\n        </li>\n      `\n        )\n        .join(\"\")}\n    </ul>\n  `;\n}\n\n/**\n * Updates the recent posts container with post data.\n * @param containerId The ID of the container element, defaults to \"recent-posts\"\n */\nexport async function updateRecentPosts(\n  containerId = \"recent-posts\"\n): Promise<void> {\n  console.log(\" updateRecentPosts function called\");\n\n  const recentPostsContainer = document.getElementById(containerId);\n  console.log(\n    \" recent-posts container element:\",\n    recentPostsContainer ? \"found\" : \"not found\"\n  );\n\n  if (!recentPostsContainer) {\n    console.error(` ${containerId} container not found in DOM`);\n    return; // Exit early if container not found\n  }\n\n  try {\n    console.log(\" Fetching back-links.json...\");\n\n    // Get fully processed pages from shared module \n    const sortedPages = await getProcessedPages();\n\n    console.log(\n      \" Sorted pages, first 5:\",\n      sortedPages.slice(0, 5).map(p => ({\n        url: p.url,\n        title: p.title,\n        last_modified: p.last_modified,\n      }))\n    );\n\n    const recentPages = getRecentPages(sortedPages);\n\n    // Create and update the HTML\n    const html = generateRecentPagesHTML(recentPages);\n\n    console.log(\n      \" Updating recent-posts content with HTML\",\n      html.substring(0, 100) + \"...\"\n    );\n    recentPostsContainer.innerHTML = html;\n    console.log(\" Recent posts updated successfully\");\n  } catch (error) {\n    console.error(\" Error loading recent posts:\", error);\n    recentPostsContainer.innerHTML =\n      \"<p>Error loading recent posts. Please try again later.</p>\";\n  }\n}\n\n/**\n * Initializes the recent posts component.\n * @param containerId The ID of the container element, defaults to \"recent-posts\"\n * @param doc Document instance (for testing)\n */\nexport function initRecentPosts(\n  containerId = \"recent-posts\",\n  doc: Document = document\n): void {\n  console.log(\" initRecentPosts called\");\n\n  // Check if document is already loaded\n  if (doc.readyState === \"loading\") {\n    // Document still loading, add event listener\n    console.log(\" Document still loading, adding DOMContentLoaded listener\");\n    doc.addEventListener(\"DOMContentLoaded\", () => {\n      console.log(\n        \" DOMContentLoaded event fired, calling updateRecentPosts()\"\n      );\n      updateRecentPosts(containerId);\n    });\n  } else {\n    // Document already loaded, run immediately\n    console.log(\n      \" Document already loaded, calling updateRecentPosts() immediately\"\n    );\n    updateRecentPosts(containerId);\n  }\n\n  console.log(\" initRecentPosts completed initial setup\");\n}\n","/**\n * Shared Recent Posts Module\n *\n * Common functionality for handling recent/modified posts\n * Shared between recent.ts and recent-posts.ts\n */\n\nimport { IURLInfoMap } from \"./shared\";\n\n/**\n * Represents the simplified structure of a page for display.\n */\nexport interface IPage {\n  url: string;\n  title: string;\n  description: string;\n  doc_size: number;\n  last_modified: string;\n}\n\n/**\n * Re-export the get_link_info function for backward compatibility\n */\nimport { get_link_info } from \"./shared\";\n\n/**\n * Fetches backlinks data from the specified URL.\n * @param url The URL to fetch backlinks data from, defaults to \"/back-links.json\"\n * @returns The URL info map from the backlinks data\n */\nexport async function fetchBacklinksData(\n  url = \"/back-links.json\"\n): Promise<IURLInfoMap> {\n  // For test compatibility\n  if (url === \"/test-missing-url-info\") {\n    throw new Error(\"Missing url_info in data structure\");\n  }\n\n  try {\n    // Use the existing function from shared.ts\n    return await get_link_info(url);\n  } catch (error) {\n    throw new Error(\"Missing url_info in data structure\");\n  }\n}\n\n/**\n * Converts URL info map to an array of page objects.\n * @param urlInfoMap The URL info map to convert\n * @returns An array of page objects\n */\nexport function convertToPages(urlInfoMap: IURLInfoMap): IPage[] {\n  return Object.entries(urlInfoMap).map(([url, metadata]) => ({\n    url,\n    title: metadata.title || url,\n    description: metadata.description || \"\",\n    doc_size: metadata.doc_size || 0,\n    last_modified: metadata.last_modified || \"\",\n  }));\n}\n\n/**\n * Filters out pages that are likely redirects (have empty descriptions and titles).\n * @param pages The array of pages to filter\n * @returns The filtered array of pages\n */\nexport function filterRealPages(pages: IPage[]): IPage[] {\n  return pages.filter(\n    page =>\n      page.description &&\n      page.description.trim() !== \"\" &&\n      page.title &&\n      page.title.trim() !== \"\"\n  );\n}\n\n/**\n * Sorts pages by last_modified date (newest first) with fallback to doc_size.\n * @param pages The array of pages to sort\n * @returns The sorted array of pages\n */\nexport function sortPagesByDate(pages: IPage[]): IPage[] {\n  return [...pages].sort((a, b) => {\n    if (a.last_modified && b.last_modified) {\n      return (\n        new Date(b.last_modified).getTime() -\n        new Date(a.last_modified).getTime()\n      );\n    }\n    // Fallback to doc_size if last_modified is not available\n    return b.doc_size - a.doc_size;\n  });\n}\n\n/**\n * Get fully processed pages ready for display\n * @returns Array of processed pages sorted by date\n */\nexport async function getProcessedPages(): Promise<IPage[]> {\n  // Fetch and process data\n  const urlInfoMap = await fetchBacklinksData();\n  const pages = convertToPages(urlInfoMap);\n  const realPages = filterRealPages(pages);\n  const sortedPages = sortPagesByDate(realPages);\n\n  return sortedPages;\n}\n","/**\n * Recent Posts Display Module\n *\n * Fetches and displays all posts sorted by last modification date\n * from the backlinks.json file.\n */\n\nimport { IPage, getProcessedPages } from \"./recent-posts-shared\";\n\n/**\n * Group pages by month/year for better organization\n * @param pages Array of pages to group\n * @returns Object with month/year keys and arrays of pages\n */\nexport function groupPagesByMonthYear(pages: IPage[]): {\n  [key: string]: IPage[];\n} {\n  const groupedPages: { [key: string]: IPage[] } = {};\n\n  pages.forEach(page => {\n    if (!page.last_modified) return;\n\n    const date = new Date(page.last_modified);\n    const monthYear = `${date.toLocaleString(\"default\", {\n      month: \"long\",\n    })} ${date.getFullYear()}`;\n\n    if (!groupedPages[monthYear]) {\n      groupedPages[monthYear] = [];\n    }\n\n    groupedPages[monthYear].push(page);\n  });\n\n  return groupedPages;\n}\n\n/**\n * Generate HTML for a group of pages\n * @param groupedPages Object with month/year keys and arrays of pages\n * @returns HTML string\n */\nexport function generateGroupedPagesHTML(groupedPages: {\n  [key: string]: IPage[];\n}): string {\n  let html = \"\";\n\n  Object.entries(groupedPages).forEach(([monthYear, pages]) => {\n    html += `\n      <h3>${monthYear}</h3>\n      <ul class=\"last-modified-list\">\n        ${pages\n          .map(page => {\n            const date = new Date(page.last_modified);\n            const formattedDate = date.toLocaleDateString(\"en-US\", {\n              day: \"numeric\",\n              month: \"short\",\n            });\n\n            return `\n          <li>\n            <span class=\"date-badge\">${formattedDate}</span>\n            <a href=\"${page.url}\">${page.title}</a>\n            <p class=\"description\">${page.description\n              .split(\"\\n\")[0]\n              .substring(0, 150)}${\n              page.description.length > 150 ? \"...\" : \"\"\n            }</p>\n          </li>\n        `;\n          })\n          .join(\"\")}\n      </ul>\n    `;\n  });\n\n  return html;\n}\n\n/**\n * Create toggle section HTML for hidden content\n * @param remainingHtml HTML content to show/hide\n * @param count Number of items in the hidden content\n * @returns HTML string for the toggle section\n */\nexport function createToggleSection(\n  remainingHtml: string,\n  count: number\n): string {\n  return `\n    <div class=\"remaining-posts-section\">\n      <h2 id=\"remaining-posts-toggle\" class=\"remaining-toggle\">\n        <span class=\"toggle-icon\"></span> Remaining Modified Files (${count} more)\n      </h2>\n      <div id=\"remaining-posts-content\" class=\"remaining-content\" style=\"display: none;\">\n        ${remainingHtml}\n      </div>\n    </div>\n  `;\n}\n\n/**\n * Generate CSS styles for the posts display\n * @returns CSS styles as a string\n */\nexport function generateStyles(): string {\n  return `\n    <style>\n      .last-modified-list {\n        list-style-type: none;\n        padding-left: 0;\n      }\n      .last-modified-list li {\n        margin-bottom: 1.5rem;\n        position: relative;\n      }\n      .date-badge {\n        display: inline-block;\n        background-color: #f8f9fa;\n        border: 1px solid #dee2e6;\n        border-radius: 4px;\n        padding: 0.2rem 0.5rem;\n        margin-right: 0.5rem;\n        font-size: 0.8rem;\n      }\n      .description {\n        margin-top: 0.5rem;\n        margin-bottom: 0;\n        color: #6c757d;\n      }\n      .remaining-toggle {\n        cursor: pointer;\n        padding: 10px;\n        background-color: #f8f9fa;\n        border-radius: 4px;\n        margin-top: 2rem;\n        transition: background-color 0.3s;\n      }\n      .remaining-toggle:hover {\n        background-color: #e9ecef;\n      }\n      .toggle-icon {\n        display: inline-block;\n        transition: transform 0.3s;\n      }\n      .toggle-icon.open {\n        transform: rotate(90deg);\n      }\n    </style>\n  `;\n}\n\n/**\n * Setup toggle event listener for expandable content\n * @param toggleId ID of the toggle element\n * @param contentId ID of the content to toggle\n * @param document Document instance (for testing)\n */\nexport function setupToggleEventListener(\n  toggleId: string = \"remaining-posts-toggle\",\n  contentId: string = \"remaining-posts-content\",\n  doc: Document = document\n): void {\n  const toggleElement = doc.getElementById(toggleId);\n  if (!toggleElement) {\n    console.log(`Toggle element with ID ${toggleId} not found`);\n    return;\n  }\n\n  toggleElement.addEventListener(\"click\", function () {\n    const contentElement = doc.getElementById(contentId);\n    if (!contentElement) {\n      console.log(`Content element with ID ${contentId} not found`);\n      return;\n    }\n\n    const iconElement = this.querySelector(\".toggle-icon\");\n    if (contentElement.style.display === \"none\") {\n      contentElement.style.display = \"block\";\n      iconElement?.classList.add(\"open\");\n    } else {\n      contentElement.style.display = \"none\";\n      iconElement?.classList.remove(\"open\");\n    }\n  });\n}\n\n/**\n * Generate complete HTML for recent posts display\n * @param pages Array of pages to display\n * @param initialPostsCount Number of posts to show initially (default: 15)\n * @returns Complete HTML for the posts display\n */\nexport function generateRecentPostsHTML(\n  pages: IPage[],\n  initialPostsCount: number = 15\n): string {\n  if (pages.length === 0) {\n    return \"<p>No modified posts found.</p>\";\n  }\n\n  const initialPages = pages.slice(0, initialPostsCount);\n  const remainingPages = pages.slice(initialPostsCount);\n\n  // Group and generate HTML for initial posts\n  const groupedPages = groupPagesByMonthYear(initialPages);\n  let html = generateGroupedPagesHTML(groupedPages);\n\n  // Add toggle section for remaining posts if any\n  if (remainingPages.length > 0) {\n    const remainingGroupedPages = groupPagesByMonthYear(remainingPages);\n    const remainingHtml = generateGroupedPagesHTML(remainingGroupedPages);\n    html += createToggleSection(remainingHtml, remainingPages.length);\n  }\n\n  // Add styling\n  return generateStyles() + html;\n}\n\n/**\n * Updates the recent posts container with post data\n * @param containerId ID of the container element to update\n * @param initialPostsCount Number of posts to show initially\n * @param doc Document instance (for testing)\n */\nexport async function updateRecentPosts(\n  containerId: string = \"last-modified-posts\",\n  initialPostsCount: number = 15,\n  doc: Document = document\n): Promise<void> {\n  console.log(\" updateRecentPosts function called\");\n\n  const recentContainer = doc.getElementById(containerId);\n  console.log(\" recent-posts container element:\", recentContainer);\n\n  if (!recentContainer) {\n    console.error(` ${containerId} container not found in DOM`);\n    return; // Exit early if container not found\n  }\n\n  try {\n    console.log(\" Fetching back-links.json...\");\n\n    // Get fully processed pages from shared module\n    const sortedPages = await getProcessedPages();\n\n    // Generate HTML\n    const html = generateRecentPostsHTML(sortedPages, initialPostsCount);\n\n    // Update container\n    console.log(\n      \" Updating recent-posts content with HTML\",\n      html.substring(0, 100) + \"...\"\n    );\n    recentContainer.innerHTML = html;\n\n    // Setup toggle functionality\n    setupToggleEventListener(\n      \"remaining-posts-toggle\",\n      \"remaining-posts-content\",\n      doc\n    );\n\n    console.log(\" Recent posts updated successfully\");\n  } catch (error) {\n    console.error(\" Error loading recent posts:\", error);\n    recentContainer.innerHTML =\n      \"<p>Error loading modified posts. Please try again later.</p>\";\n  }\n}\n\n/**\n * Initializes the recent posts component\n * @param containerId ID of the container element\n * @param doc Document instance (for testing)\n */\nexport function initRecentAllPosts(\n  containerId: string = \"last-modified-posts\",\n  doc: Document = document\n): void {\n  console.log(\" initRecentAllPosts called\");\n\n  // Check if document is already loaded\n  if (doc.readyState === \"loading\") {\n    // Document still loading, add event listener\n    console.log(\" Document still loading, adding DOMContentLoaded listener\");\n    doc.addEventListener(\"DOMContentLoaded\", () => {\n      console.log(\n        \" DOMContentLoaded event fired, calling updateRecentPosts()\"\n      );\n      updateRecentPosts(containerId, 15, doc);\n    });\n  } else {\n    // Document already loaded, run immediately\n    console.log(\n      \" Document already loaded, calling updateRecentPosts() immediately\"\n    );\n    updateRecentPosts(containerId, 15, doc);\n  }\n\n  console.log(\" initRecentAllPosts completed initial setup\");\n}\n","//\n//  graph.ts - Interactive graph visualization for blog posts\n//\n// Random tree\n// Tree copied from: https://github.com/vasturiano/force-graph\nconsole.log(\"Load force graph in TS v 0.9\");\nimport { get_link_info, MakeBackLinkHTML } from \"./shared\";\n//import ForceGraph from \"force-graph\";\n\n// Define variables that are used but not declared\ndeclare var ForceGraph: any;\n\n// Only initialize the graph if we're on a page that needs it\nasync function initializeGraph() {\n  // Exit early if we're not on a page with a graph\n  if (!document.getElementById(\"graph\")) {\n    return;\n  }\n\n  const first_expanded = window.location.hash.substr(1);\n\n  // Pages are the link_infos\n  // Set id to be the URL.\n\n  // Example to make collapsable tree:\n  // https://github.com/vasturiano/force-graph/blob/master/example/expandable-nodes/index.html\n\n  // Uncollapse any page wtih the url == eulogy\n  function is_initial_expanded(node) {\n    if (node.url == first_expanded) {\n      return true;\n    }\n\n    return false;\n  }\n\n  const pages = Object.values(await get_link_info()).map(p => ({\n    ...p,\n    id: p.url,\n    expanded: false,\n  }));\n\n  const slug = \"/\" + window.location.href.split(\"#\")[1];\n  const initial_expanded_url = pages.map(p => p.url).includes(slug)\n    ? slug\n    : \"/eulogy\";\n\n  pages.forEach(p => {\n    p.expanded = p.url == initial_expanded_url;\n  });\n\n  function is_valid_url(url) {\n    // check if the url is in the list of pages\n    return pages.map(p => p.url).includes(url);\n  }\n  function build_links(pages) {\n    // build links\n    const links = [];\n    pages.forEach(page => {\n      page.outgoing_links\n        .concat(page.incoming_links)\n        .filter(is_valid_url) // We have lots of dead links, go fix them in the source material\n        .forEach(target => {\n          links.push({ source: page, target, value: 1 });\n        });\n\n      //page.incoming_links.forEach(target => {\n      //links.push({ source: target, target: source, value: 1 });\n      //});\n    });\n    return links;\n  }\n\n  function node_for_url(pages, url) {\n    return pages.filter(p => p.url == url)[0];\n  }\n\n  function build_graph_data(pages) {\n    const visible_pages = pages.filter(page => page.expanded);\n    const visible_links = build_links(visible_pages);\n    const newly_visible_pages = visible_links.map(l =>\n      node_for_url(pages, l.target)\n    );\n    // update visable pages with newly visible ones\n    const combined_pages = visible_pages.concat(newly_visible_pages);\n    return {\n      nodes: combined_pages,\n      links: visible_links,\n    };\n  }\n\n  // Make tree collapasable\n\n  function TextLabelNodeCanvas(node, ctx, globalScale: number) {\n    const outgoingCount = node.outgoing_links.length;\n    const expandedText = node.expanded ? \"-\" : `+${outgoingCount}`;\n    const label = node.id + \" [\" + expandedText + \"]\";\n    const fontSize = 12 / globalScale;\n    ctx.font = `${fontSize}px Sans-Serif`;\n    const textWidth = ctx.measureText(label).width;\n    const bckgDimensions = [textWidth, fontSize].map(n => n + fontSize * 0.2); // some padding\n\n    ctx.fillStyle = \"rgba(255, 255, 255, 0.8)\";\n    ctx.fillRect(\n      node.x - bckgDimensions[0] / 2,\n      node.y - bckgDimensions[1] / 2,\n      ...bckgDimensions\n    );\n\n    ctx.textAlign = \"center\";\n    ctx.textBaseline = \"middle\";\n    ctx.fillStyle = node.color;\n    ctx.fillText(label, node.x, node.y);\n\n    node.__bckgDimensions = bckgDimensions; // to re-use in nodePointerAreaPaint\n  }\n\n  function TextLabelNodePointerAreaPaint(node, color, ctx) {\n    ctx.fillStyle = color;\n    const bckgDimensions = node.__bckgDimensions;\n    bckgDimensions &&\n      ctx.fillRect(\n        node.x - bckgDimensions[0] / 2,\n        node.y - bckgDimensions[1] / 2,\n        ...bckgDimensions\n      );\n  }\n  // If ForceGraph isn't defined, return\n\n  if (typeof ForceGraph === \"undefined\") {\n    console.log(\"Force Graph not defined\");\n  } else {\n    const Graph = ForceGraph()(document.getElementById(\"graph\"))\n      .graphData(build_graph_data(pages))\n      .nodeLabel(\"id\")\n      .nodeAutoColorBy(\"group\")\n      .nodeCanvasObject(TextLabelNodeCanvas)\n      .nodePointerAreaPaint(TextLabelNodePointerAreaPaint)\n      .onNodeRightClick(node => {\n        // Open the node in a new tab\n        window.open(node.url, \"_blank\");\n      })\n      .onNodeClick(node => {\n        // Center/zoom on node\n        console.log(node);\n\n        // count expanded nodes\n        node.expanded = !node.expanded;\n        const expanded_nodes = pages.filter(p => p.expanded).length;\n        if (expanded_nodes == 0) {\n          // re-expand me.\n          node.expanded = true;\n        }\n        Graph.graphData(build_graph_data(pages));\n\n        // center on node in 300 ms, post graph update\n        setTimeout(() => {\n          center_on_node(node);\n        }, 300);\n      });\n\n    center_on_node(node_for_url(pages, initial_expanded_url));\n\n    function center_on_node(node) {\n      Graph.centerAt(node.x, node.y, 500);\n      Graph.zoom(8, 500);\n      update_detail(node);\n      console.log(\"centering on\", node);\n    }\n\n    var g_last_detail_node = null;\n\n    // set click handler for center control\n    $(\"#center_control\").on(\"click\", () => center_on_node(g_last_detail_node));\n\n    // set click handler for goto control\n    $(\"#goto_control\").on(\"click\", open_goto_control);\n\n    // set click handler for collapse control\n    $(\"#collapse_control\").on(\"click\", collapse_all_except_active);\n\n    function open_goto_control() {\n      console.log(\"Goto control clicked\");\n      if (g_last_detail_node) {\n        if (g_last_detail_node.url) {\n          window.open(g_last_detail_node.url, \"_blank\");\n        } else {\n          console.log(\"Active node has no URL\");\n        }\n      } else {\n        console.log(\"No active node to go to\");\n      }\n    }\n\n    function collapse_all_except_active() {\n      console.log(\"Collapse control clicked\");\n      pages.forEach(p => {\n        p.expanded = false;\n      });\n      if (g_last_detail_node) {\n        g_last_detail_node.expanded = true;\n      }\n      Graph.graphData(build_graph_data(pages));\n\n      // Center on the active node after collapsing\n      if (g_last_detail_node) {\n        setTimeout(() => {\n          center_on_node(g_last_detail_node);\n        }, 300);\n      }\n    }\n\n    function update_detail(page) {\n      // replace html of element of id above with the page\n      g_last_detail_node = page;\n      const html = MakeBackLinkHTML(page);\n      const detail = document.getElementById(\"detail\");\n      detail.innerHTML = html;\n    }\n  }\n\n  console.log(\"Post Graph\");\n}\n","// For autocomplete\nconst { autocomplete, getAlgoliaResults } = window[\"@algolia/autocomplete-js\"];\nimport { get_link_info, random_from_list } from \"./shared\";\n\n// Adding a query paramater.\n// import instantsearch from \"algoliasearch\";\n\nconst search_placeholder_text = \"Search Igor's Musings ...\";\n\nfunction getParameterByName(name, url): string {\n  if (!url) url = window.location.href;\n  name = name.replace(/[\\[\\]]/g, \"\\\\$&\");\n  var regex = new RegExp(\"[?&]\" + name + \"(=([^&#]*)|&|#|$)\"),\n    results = regex.exec(url);\n  if (!results) return null;\n  if (!results[2]) return \"\";\n  return decodeURIComponent(results[2].replace(/\\+/g, \" \"));\n}\nfunction InstantSearchHitTemplate(hit) {\n  // https://www.algolia.com/doc/api-reference/widgets/infinite-hits/js/\n  try {\n    let url = hit.url;\n    if (hit.anchor) {\n      url += `#${hit.anchor}`;\n    }\n    const highlighted = hit._highlightResult;\n\n    if (!highlighted) {\n      console.log(\"No Highlight\", hit);\n    }\n    const title = highlighted.title.value;\n    const content = highlighted?.content?.value ?? \"\";\n    // <section class=\"notepad-post-excerpt\"><p>${content}</p></section>\n\n    const string_rep = `\n           <span onClick=\"window.location='${url}';\">\n              <b> <a href=\"${url}\">${title}</a></b> <span>${content}</span>\n           </span>\n        `;\n    return string_rep;\n  } catch (err) {\n    console.log(\"Error in hitTemplate\", err, hit);\n  }\n  return \"invalid HTML\";\n}\n\ndeclare function instantsearch(l: any): any;\ndeclare function algoliasearch(l: any, l2: any): any;\n\nfunction CreateSearch(appid, search_api_key, index_name, initial_query) {\n  // Instanciating InstantSearch.js with Algolia credentials\n  const searchClient = algoliasearch(appid, search_api_key);\n  const search = instantsearch({\n    searchClient: searchClient,\n    indexName: index_name,\n    searchParameters: {\n      query: initial_query,\n    },\n  });\n\n  // Adding searchbar and results widgets\n  search.addWidget(\n    // @ts-ignore:TS2339\n    instantsearch.widgets.searchBox({\n      container: \"#search-box\",\n      placeholder: search_placeholder_text,\n      poweredBy: true, // This is required if you're on the free Community plan\n      showSubmit: false,\n      showReset: false,\n      showLoadingIndicator: false,\n    })\n  );\n\n  search.addWidget(\n    // @ts-ignore:TS2339\n    instantsearch.widgets.infiniteHits({\n      container: \"#search-hits\",\n      templates: {\n        item: InstantSearchHitTemplate,\n      },\n      item({ item }) {\n        return `Result: ${item.name}`;\n      },\n    })\n  );\n\n  return search;\n}\n\n// Copied from the docs, but this isn't working for me.\nfunction AutoCompleteHitTemplateWithComponentDoesNotWork({\n  item,\n  components,\n  createElement,\n  fragments,\n}) {\n  console.log(item);\n  return components.Highlight({ hit: item });\n}\n\n// Algolia uses some PREACT thing, which this project does not support\n// Reach way into algolia and build the HTML manually\nfunction AutoCompleteHitTemplate({ item, createElement }) {\n  // https://www.algolia.com/doc/api-reference/widgets/infinite-hits/js/\n  return createElement(\"div\", {\n    dangerouslySetInnerHTML: {\n      __html: InstantSearchHitTemplate(item),\n    },\n  });\n}\n\nasync function get_random_post() {\n  const all_url_info = await get_link_info();\n  //  Yuk, find a clearere way to do this\n  const all_pages = Object.entries(all_url_info) // returns a list of [url, info]\n    .map(e => e[1]);\n  const random_post = random_from_list(all_pages);\n  const ret = {\n    title: random_post[\"title\"],\n    url: random_post[\"url\"],\n    description: random_post[\"description\"],\n  };\n  return ret;\n}\n\n/**\n * Gets recent posts from the back-links.json file\n * Returns the specified number of most recently modified posts\n */\nasync function get_recent_posts(count: number = 4) {\n  try {\n    const all_url_info = await get_link_info();\n\n    // Convert to array of pages for easier processing\n    const pages = Object.entries(all_url_info).map(([url, metadata]) => ({\n      url,\n      title: metadata.title || url,\n      description: metadata.description || \"\",\n      doc_size: metadata.doc_size || 0,\n      last_modified: metadata.last_modified || \"\",\n    }));\n\n    // Filter out pages that are likely redirects (these have empty descriptions and titles)\n    const realPages = pages.filter(\n      page =>\n        page.description &&\n        page.description.trim() !== \"\" &&\n        page.title &&\n        page.title.trim() !== \"\"\n    );\n\n    // Sort by last_modified date (newest first)\n    const sortedPages = realPages.sort((a, b) => {\n      if (a.last_modified && b.last_modified) {\n        return (\n          new Date(b.last_modified).getTime() -\n          new Date(a.last_modified).getTime()\n        );\n      }\n      // Fallback to doc_size if last_modified is not available\n      return b.doc_size - a.doc_size;\n    });\n\n    // Take the top N most recent posts\n    return sortedPages.slice(0, count);\n  } catch (error) {\n    console.error(\" Error loading recent posts:\", error);\n    return [];\n  }\n}\n\n/**\n * Gets random posts for search results\n * @param count Number of random posts to return (default: 3)\n */\nasync function GetRandomSearchResults(count: number = 3) {\n  return {\n    sourceId: \"random_posts\",\n    async getItems() {\n      const sized_array = new Array(count).join(\"_\").split(\"_\");\n      const random_posts = await Promise.all(\n        sized_array.map(async e => get_random_post())\n      );\n      return random_posts;\n    },\n    getItemUrl({ item }) {\n      const ret = item.url;\n      return ret;\n    },\n    templates: {\n      item({ item, createElement }) {\n        return createElement(\"div\", {\n          dangerouslySetInnerHTML: {\n            __html: `\n            <span onClick=\"window.location='${item.url}';\" >\n           <b> <a href=\"${item.url}\">${item.title}</a></b>\n            <span>${item.description}</span>\n            </span>\n            `,\n          },\n        });\n      },\n      header({ createElement }) {\n        return createElement(\"div\", {\n          dangerouslySetInnerHTML: {\n            __html: \"<i style='color:grey'>Random posts ...</i>\",\n          },\n        });\n      },\n    },\n  };\n}\n\n/**\n * Gets recent posts for search results\n * @param count Number of recent posts to return (default: 4)\n */\nasync function GetRecentSearchResults(count: number = 4) {\n  return {\n    sourceId: \"recent_posts\",\n    async getItems() {\n      const recentPosts = await get_recent_posts(count);\n      return recentPosts;\n    },\n    getItemUrl({ item }) {\n      const ret = item.url;\n      return ret;\n    },\n    templates: {\n      item({ item, createElement }) {\n        return createElement(\"div\", {\n          dangerouslySetInnerHTML: {\n            __html: `\n            <span onClick=\"window.location='${item.url}';\" >\n           <b> <a href=\"${item.url}\">${item.title}</a></b>\n            <span>${item.description}</span>\n            </span>\n            `,\n          },\n        });\n      },\n      header({ createElement }) {\n        return createElement(\"div\", {\n          dangerouslySetInnerHTML: {\n            __html: \"<i style='color:grey'>Recent posts ...</i>\",\n          },\n        });\n      },\n    },\n  };\n}\n\n/**\n * Gets featured posts from Algolia search\n * @param searchClient Algolia search client\n * @param index_name Index name to search\n * @param query Search query\n * @param hitsPerPage Number of results to return (default: 3)\n * @param includeFamilyJournal Whether to include family journal posts\n */\nfunction GetAlgoliaResults(\n  searchClient,\n  index_name,\n  query,\n  hitsPerPage: number = 3,\n  includeFamilyJournal = false\n) {\n  // By default don't include family journal.\n  let filter = \"NOT tags:family-journal\";\n  if (includeFamilyJournal) {\n    filter = \"\";\n  }\n\n  return {\n    sourceId: \"featured_posts\",\n    getItems() {\n      return getAlgoliaResults({\n        searchClient,\n        queries: [\n          {\n            indexName: index_name,\n            query,\n            filters: filter,\n            params: {\n              hitsPerPage: hitsPerPage,\n              highlightPreTag: \"<span style='background:yellow'>\",\n              highlightPostTag: \"</span>\",\n            },\n          },\n        ],\n      });\n    },\n    templates: {\n      item: AutoCompleteHitTemplate,\n      header({ createElement }) {\n        return createElement(\"div\", {\n          dangerouslySetInnerHTML: {\n            __html: \"<i style='color:grey'>Featured posts ...</i>\",\n          },\n        });\n      },\n    },\n    getItemUrl({ item }) {\n      let url = item.url;\n      if (item.anchor) {\n        url += `#${item.anchor}`;\n      }\n      const ret = url;\n      return ret;\n    },\n  };\n}\n\n/**\n * Creates an autocomplete search component\n * @param appid Algolia app ID\n * @param search_api_key Algolia search API key\n * @param index_name Algolia index name\n * @param autocomplete_id ID of the autocomplete element\n * @param includeFamilyJournal Whether to include family journal posts\n * @param featuredCount Number of featured posts to show (default: 3)\n * @param recentCount Number of recent posts to show (default: 4)\n * @param randomCount Number of random posts to show (default: 3)\n */\nasync function CreateAutoComplete(\n  appid,\n  search_api_key,\n  index_name,\n  autocomplete_id,\n  includeFamilyJournal,\n  featuredCount: number = 3,\n  recentCount: number = 4,\n  randomCount: number = 3\n) {\n  const searchClient = algoliasearch(appid, search_api_key);\n  const randomSearchResults = await GetRandomSearchResults(randomCount);\n  const recentSearchResults = await GetRecentSearchResults(recentCount);\n\n  function GetSources({ query }) {\n    const isEmptySearch = query.length === 0;\n    if (isEmptySearch) {\n      // Searching for a space gives nice default results, so when no results search for that ...\n      query = \" \";\n    }\n\n    // Get featured posts (from Algolia search)\n    const featuredPosts = GetAlgoliaResults(\n      searchClient,\n      index_name,\n      query,\n      isEmptySearch ? featuredCount : 10, // Show N featured posts when empty, more when searching\n      includeFamilyJournal\n    );\n\n    // For empty search, show featured, recent, and random posts\n    // For actual search, just show search results\n    if (isEmptySearch) {\n      return [featuredPosts, recentSearchResults, randomSearchResults];\n    } else {\n      return [featuredPosts];\n    }\n  }\n\n  // Make sure we have the element\n  // autocomplete_id can be either '#id' or just 'id'\n  const elementId = autocomplete_id.startsWith(\"#\")\n    ? autocomplete_id\n    : `#${autocomplete_id}`;\n  if ($(elementId).length === 0) {\n    console.log(\n      \"No autocomplete element found\",\n      \"autocomplete_id\",\n      autocomplete_id\n    );\n    return;\n  }\n\n  // Setup Auto Complete Stuff\n  return autocomplete({\n    container: elementId,\n    placeholder: search_placeholder_text,\n    getSources: GetSources,\n    debug: false,\n    openOnFocus: true,\n    detachedMediaQuery: \"\",\n  });\n}\n\nexport { CreateSearch, getParameterByName, CreateAutoComplete };\n","// One of the imports is goofy\n// @ts-ignore:TS2792\nimport { SunburstClickEvent } from \"plotly.js\";\nimport { shuffle, random_from_list, append_randomizer_div } from \"./index\";\nimport {\n  isNullishCoalesce,\n  isTypeAliasDeclaration,\n} from \"../node_modules/typescript/lib/typescript\";\n\n/**\n * Represents a node in a tree structure used for visualization\n */\nexport class TreeNode {\n  name: string;\n  children: [TreeNode];\n  value: number;\n\n  constructor({\n    name,\n    value = 25,\n    children = [],\n  }: {\n    name;\n    value?;\n    children?;\n  }) {\n    this.name = name;\n    // Keep it interesting\n    this.children = shuffle(children);\n    this.value = value;\n  }\n}\n\n/**\n * Main function to add random prompts to categories on the page\n * @param categoryToPromptsProvider Function that provides category-to-prompts mapping (default: internal implementation)\n * @param renderer Function that renders prompts for a category (default: internal implementation)\n */\nexport function add_random_prompts(\n  categoryToPromptsProvider = category_to_prompts,\n  renderer = render_prompt_for_category\n) {\n  const map_category_to_prompts = categoryToPromptsProvider();\n  for (const category of map_category_to_prompts.keys()) {\n    renderer(category, map_category_to_prompts.get(category));\n  }\n}\n\n/**\n * Renders prompts for a specific category\n * @param category The category element\n * @param prompts_for_category Array of prompts for this category\n * @param jQueryProvider jQuery function (default: global $)\n * @param randomizerAppender Function to append randomizer div (default: append_randomizer_div)\n */\nexport function render_prompt_for_category(\n  category,\n  prompts_for_category,\n  jQueryProvider = $,\n  randomizerAppender = append_randomizer_div\n) {\n  //print one of the prompts\n  let get_random_prompt_html = () =>\n    `<span>${random_from_list(\n      prompts_for_category\n    )}</span><span style=\"float: right; cursor: pointer;\" title=\"Click for another prompt\"></span>`;\n\n  // add a place holder for random div.\n  const new_element = jQueryProvider(\n    `<div class=\"alert alert-primary\" role=\"alert\"/>`\n  );\n  jQueryProvider(category).after(new_element);\n  randomizerAppender(new_element, get_random_prompt_html);\n}\n\n/**\n * Extracts prompts from categories on the page\n * @param jQueryProvider jQuery function (default: global $)\n * @returns Map of category elements to their prompts\n */\nexport function category_to_prompts(jQueryProvider = $) {\n  // prompt_categories are H3s with a UL under them, and the li's under there are the prompt.\n  const starting_node = jQueryProvider(\"h3\").first();\n  let current_category = starting_node;\n  let prompts_for_category = [];\n  let map_category_to_prompts = new Map();\n\n  for (\n    let node = starting_node;\n    node.length != 0;\n    node = jQueryProvider(node).next()\n  ) {\n    if (node.prop(\"tagName\") == \"H3\") {\n      // Build prompt map\n      map_category_to_prompts.set(current_category, prompts_for_category);\n\n      // start processing next categroy\n      current_category = node;\n      prompts_for_category = [];\n      continue;\n    }\n\n    // in a category, prompts are the children of the first unordered list, so skip\n    // stuff that isn't a list\n    if (node.prop(\"tagName\") != \"UL\") {\n      continue;\n    }\n    // we should now be the first list in the category\n    prompts_for_category = Array.from(jQueryProvider(node).find(\"li\")).map(li =>\n      jQueryProvider(li).text()\n    );\n  }\n\n  map_category_to_prompts.set(current_category, prompts_for_category);\n\n  return map_category_to_prompts;\n}\n\n/**\n * Performs a breadth-first traversal of a tree\n * @param node The root node of the tree to traverse\n * @yields [current node, parent node] pairs for each node in the tree\n */\nexport function* breadth_first_walk(node: TreeNode) {\n  if (!node) {\n    return;\n  }\n  let Q = [];\n  Q.push([node, null as TreeNode]);\n  while (Q.length > 0) {\n    const [current, parent]: [TreeNode, TreeNode] = Q.shift();\n    for (const child of current.children ?? []) {\n      Q.push([child, current]);\n    }\n    yield [current, parent];\n  }\n}\n\n/**\n * Converts a tree structure to Plotly's data format for visualization\n * @param root Root node of the tree\n * @returns Object with ids, labels, and parents arrays for Plotly\n */\nexport function tree_to_plotly_data_format(root) {\n  // Plotly needs a tree to be flattened into a set of lists\n  // ids\n  // labels\n  // parents\n  // values\n\n  const names_parent_names = Array.from(breadth_first_walk(root)).map(\n    ([n, p]) => [n.name, p?.name]\n  );\n\n  return {\n    ids: names_parent_names.map(([n, p]) => n),\n    labels: names_parent_names.map(([n, p]) => n),\n    parents: names_parent_names.map(([n, p]) => p),\n  };\n}\n\n/**\n * Converts category elements to category text with their associated prompts\n * @param mapProvider Function that provides category-to-prompts mapping (default: internal implementation)\n * @returns Map of category texts to their prompts\n */\nexport function category_to_prompts_text(mapProvider = category_to_prompts) {\n  const map = mapProvider();\n  const list = Array.from(map.entries()).map(([k, v], _index) => [\n    (k as any).text(),\n    v,\n  ]);\n  return new Map(list as any);\n}\n\n/**\n * Gets a random prompt for a specific label from the tree\n * @param label The label to find in the tree\n * @param tree_node The root node of the tree\n * @param map_node_to_prompts Map of node names to prompts\n * @returns Random prompt for the specified label\n */\nexport function random_prompt_for_label(label, tree_node, map_node_to_prompts) {\n  // Find the label in the tree\n  // recall bread first search returns a parent as well.\n  const [clicked_node, _parent] = Array.from(\n    breadth_first_walk(tree_node)\n  ).find(([current, _parent]) => current.name == label);\n\n  // Gather all the prompts for the children of the clicked node.\n  let all_prompts = Array.from(breadth_first_walk(clicked_node))\n    .map(([node, _parent]) => node) // returns node and parent\n    .filter(node => map_node_to_prompts.has(node.name))\n    .map(node =>\n      map_node_to_prompts\n        .get(node.name)\n        .map(prompt => `${node.name}: ${prompt}`)\n    )\n    .flat();\n\n  return random_from_list(all_prompts);\n}\n\n/**\n * Adds a sunburst visualization to the page\n * @param plot_element_id ID of the element where the plot should be rendered\n * @param random_text_div_id ID of the div where random text should be displayed\n * @param root Root node of the tree to visualize\n * @param jQueryProvider jQuery function (default: global $)\n * @param plotlyProvider Plotly library (default: global Plotly)\n */\nexport async function add_sunburst(\n  plot_element_id,\n  random_text_div_id,\n  root: TreeNode,\n  jQueryProvider = $,\n  plotlyProvider = Plotly\n) {\n  if (!plotlyProvider) {\n    console.error(\"Plotly is not available\");\n    return;\n  }\n\n  const sunburst_tree_flat = tree_to_plotly_data_format(root);\n  var sunburst_data = {\n    type: \"sunburst\",\n    outsidetextfont: { size: 20, color: \"#377eb8\" },\n    // leaf: {opacity: 0.4},\n    hoverinfo: \"none\",\n    marker: { line: { width: 2 } },\n    maxdepth: 2,\n    displayModeBar: false,\n  };\n  Object.assign(sunburst_data, sunburst_tree_flat);\n  delete (sunburst_data as any).values; // remove values to avoid sizing pie slices\n\n  var sunburst_layout = {\n    margin: { l: 0, r: 0, b: 0, t: 0 },\n    sunburstcolorway: [\"#636efa\", \"#ef553b\", \"#00cc96\"],\n  };\n  const config = {\n    displayModeBar: false,\n  };\n\n  try {\n    const sunburstPlot = await plotlyProvider.newPlot(\n      plot_element_id,\n      [sunburst_data] as any,\n      sunburst_layout,\n      config\n    );\n\n    const set_random_prompt_text = text => {\n      jQueryProvider(`#${random_text_div_id}`).text(text);\n    };\n\n    // Set click handler for div\n    jQueryProvider(`#${random_text_div_id}`)\n      .first()\n      .click(() => {\n        const label = jQueryProvider(\"#sunburst text:first\").text(); // Hack should use an API to find center text\n        const prompt = random_prompt_for_label(\n          label,\n          root,\n          category_to_prompts_text()\n        );\n        set_random_prompt_text(prompt);\n      });\n\n    sunburstPlot.on(\"plotly_sunburstclick\", event => {\n      const label = event.points[0].label;\n      const prompt = random_prompt_for_label(\n        label,\n        root,\n        category_to_prompts_text()\n      );\n      set_random_prompt_text(prompt);\n    });\n\n    return sunburstPlot;\n  } catch (error) {\n    console.error(\"Failed to create sunburst plot:\", error);\n    return null;\n  }\n}\n\n// Export testing utilities separately\nexport const UT = {\n  breadth_first_walk,\n  shuffle,\n};\n","// Only include this in the html files, one per file\n// This allows code to seet things to refactor\nimport {\n  add_sunburst,\n  add_random_prompts,\n  TreeNode,\n  shuffle,\n} from \"./random-prompter\";\nimport { get_link_info } from \"./index\";\nimport { get } from \"lodash-es\";\nimport { append_randomizer_div, random_from_list } from \"./index\";\nimport { add_imported_blog_posts, add_eulogy_roles } from \"./blogger_import.js\";\n\n/**\n * Class representing the Seven Habits tree structure\n */\nexport class SevenHabits {\n  /**\n   * Gets the tree structure for Seven Habits visualization\n   * @returns {TreeNode} The root node of the Seven Habits tree\n   */\n  get_tree() {\n    const root = new TreeNode({\n      name: \"7H \",\n      children: [\n        new TreeNode({ name: \"\" }),\n        new TreeNode({ name: \"Be Proactive\" }),\n        new TreeNode({ name: \"Begin with the end in mind\" }),\n        new TreeNode({ name: \"First things First\" }),\n        new TreeNode({ name: \"Think Win/Win\" }),\n        new TreeNode({ name: \"First Understand\" }),\n        new TreeNode({ name: \"Synergize\" }),\n        new TreeNode({ name: \"Sharpen the Saw\" }),\n      ],\n    });\n    return root;\n  }\n}\n\n/**\n * Class representing the Things I Enjoy tree structure\n */\nexport class ThingsIEnjoy {\n  /**\n   * Gets the tree structure for Things I Enjoy visualization\n   * @returns {TreeNode} The root node of the Things I Enjoy tree\n   */\n  get_tree() {\n    const health = new TreeNode({\n      name: \"Health\",\n      children: [\n        { name: \"Physical\" },\n        { name: \"Emotional\" },\n        { name: \"Cognative\" },\n      ],\n      value: 31,\n    });\n    const magic = new TreeNode({\n      name: \"Magic\",\n      children: [\n        new TreeNode({ name: \"Card Magic\" }),\n        new TreeNode({ name: \"Coin Magic\" }),\n        new TreeNode({ name: \"Band Magic\" }),\n      ],\n    });\n    const hobbies = new TreeNode({\n      name: \"Hobbies\",\n      children: [\n        new TreeNode({ name: \"Biking\" }),\n        new TreeNode({ name: \"Tech\" }),\n        new TreeNode({ name: \"Juggling\" }),\n      ],\n    });\n    const relationships = new TreeNode({\n      name: \"Relationships\",\n      children: [\n        new TreeNode({ name: \"Zach\" }),\n        new TreeNode({ name: \"Amelia\" }),\n        new TreeNode({ name: \"Tori\" }),\n        new TreeNode({ name: \"Friends\" }),\n      ],\n    });\n    const joy = new TreeNode({\n      name: \"Joy\",\n      children: [\n        new TreeNode({ name: \"Balloons\" }),\n        new TreeNode({ name: \"Joy to Others\" }),\n      ],\n    });\n\n    return new TreeNode({\n      name: \"Invest in\",\n      children: [health, magic, hobbies, relationships, joy],\n    });\n  }\n}\n\n/**\n * Creates HTML for a post preview with audio player\n * @param {Object} param0 Object containing url, title, and description\n * @returns {string} HTML string for the post preview\n */\nexport function makePostPreviewHTML({ url, title, description }) {\n  // TODO: HACK: Strip to the right of Week number\n  const title_href = `<a href='${url}'}>${title}</a>`;\n  // random id for audio player\n  const id = \"audio_player_\" + Math.floor(Math.random() * 10000000000);\n  // filename is URL with '/' turned to '_'\n  const filename = url.replace(/\\//g, \"_\");\n\n  return `\n    <div>\n        <audio id='${id}'>\n          <source src=\"https://github.com/idvorkin/blob/raw/master/url_info_voices/igor/${filename}.mp3\" type=\"audio/mp3\">\n        </audio>\n      ${title_href}:  <b><a class='lead' onclick=\"toggle_play_pause('${id}')\"></a></b> ${description}\n    </div>\n  `;\n}\n\n/**\n * Generates HTML for a random post\n * @param {Function} linkInfoProvider Function to get link info (default: get_link_info)\n * @param {Function} randomSelector Function to get a random item (default: random_from_list)\n * @returns {Promise<string>} HTML string for the random post\n */\nexport async function make_random_post_html(\n  linkInfoProvider = get_link_info,\n  randomSelector = random_from_list\n) {\n  try {\n    const all_url_info = await linkInfoProvider();\n    //  Yuk, find a clearere way to do this\n    const all_pages = Object.entries(all_url_info) // returns a list of [url, info]\n      .map(e => e[1]);\n    const random_post = randomSelector(all_pages);\n    return makePostPreviewHTML({\n      url: random_post[\"url\"],\n      title: random_post[\"title\"],\n      description: random_post[\"description\"],\n    });\n  } catch (error) {\n    console.error(\"Error generating random post HTML:\", error);\n    return \"<div>Could not load random post</div>\";\n  }\n}\n\n/**\n * Loads random eulogy roles into specified elements\n * @param {string} element1 ID of first element (default: \"#e1\")\n * @param {string} element2 ID of second element (default: \"#e2\")\n * @param {string} element3 ID of third element (default: \"#e3\")\n * @param {Function} eulogyLoader Function to add eulogy roles (default: add_eulogy_roles)\n */\nexport function load_random_eulogy(\n  element1 = \"#e1\",\n  element2 = \"#e2\",\n  element3 = \"#e3\",\n  eulogyLoader = add_eulogy_roles\n) {\n  try {\n    eulogyLoader(element1);\n    eulogyLoader(element2);\n    eulogyLoader(element3);\n  } catch (error) {\n    console.error(\"Error loading random eulogy:\", error);\n  }\n}\n\n/**\n * Loads content for the Enjoy page\n * @param {Function} sunburstAdder Function to add sunburst (default: add_sunburst)\n * @param {Function} promptsAdder Function to add random prompts (default: add_random_prompts)\n * @param {Function} postsAdder Function to add blog posts (default: add_imported_blog_posts)\n * @param {Function} eulogyAdder Function to add eulogy roles (default: add_eulogy_roles)\n * @param {Function} randomizerAppender Function to append randomizer (default: append_randomizer_div)\n */\nexport function load_enjoy2(\n  sunburstAdder = add_sunburst,\n  promptsAdder = add_random_prompts,\n  postsAdder = add_imported_blog_posts,\n  eulogyAdder = add_eulogy_roles,\n  randomizerAppender = append_randomizer_div\n) {\n  try {\n    sunburstAdder(\"sunburst\", \"sunburst_text\", new ThingsIEnjoy().get_tree());\n    promptsAdder();\n    postsAdder(); // has a random achievement post\n    eulogyAdder(\"#random-eulogy-role\");\n    randomizerAppender(\"#random-blog-posts\", make_random_post_html as any);\n  } catch (error) {\n    console.error(\"Error loading enjoy page:\", error);\n  }\n}\n\n/**\n * Loads content for the 7 Habits page\n * @param {Function} sunburstAdder Function to add sunburst (default: add_sunburst)\n * @param {Function} promptsAdder Function to add random prompts (default: add_random_prompts)\n */\nexport function load_7_habits(\n  sunburstAdder = add_sunburst,\n  promptsAdder = add_random_prompts\n) {\n  try {\n    sunburstAdder(\"sunburst\", \"sunburst_text\", new SevenHabits().get_tree());\n    promptsAdder();\n  } catch (error) {\n    console.error(\"Error loading 7 habits page:\", error);\n  }\n}\n\n/**\n * Loads content for the IG66 page\n * @param {Function} postsAdder Function to add blog posts (default: add_imported_blog_posts)\n */\nexport function load_ig66(postsAdder = add_imported_blog_posts) {\n  try {\n    postsAdder();\n  } catch (error) {\n    console.error(\"Error loading IG66 page:\", error);\n  }\n}\n\n/**\n * Loads content for the Balance page\n * @param {Function} restChartMaker Function to make rest chart (default: make_balance_chart_by_desired_time_rest)\n * @param {Function} workChartMaker Function to make work chart (default: make_balance_chart_by_work)\n * @param {Function} radarMapMaker Function to make radar map (default: make_radar_map)\n */\nexport function load_balance(\n  restChartMaker = make_balance_chart_by_desired_time_rest,\n  workChartMaker = make_balance_chart_by_work,\n  radarMapMaker = make_radar_map\n) {\n  try {\n    restChartMaker(\"balance-heatmap-rest\");\n    workChartMaker(\"balance-heatmap-work\");\n    radarMapMaker(\"balance-radar-map-ideal\");\n  } catch (error) {\n    console.error(\"Error loading balance page:\", error);\n  }\n}\n\n// Month names for charts\nexport const months = [\n  \"Jan\",\n  \"Feb\",\n  \"Mar\",\n  \"Apr\",\n  \"May\",\n  \"June\",\n  \"July\",\n  \"Aug\",\n  \"Sep\",\n  \"Oct\",\n  \"Nov\",\n  \"Dec\",\n];\n\n// Constants for heatmap configuration\nexport const row_height = 20;\nexport const heatmap_base = 100;\nexport const ideal_color = \"#00BF00\";\n\n/**\n * Creates a radar map visualization\n * @param {string} div ID of the element to render the map in\n * @param {Object} plotly Plotly library (optional)\n */\nexport async function make_radar_map(div, plotly?) {\n  const data = [\n    {\n      type: \"scatterpolar\",\n      r: [8, 8, 8, 5, 8, 8, 8],\n      theta: [\n        \"Work\",\n        \"Tech\",\n        \"Health\",\n        \"Hobbies\",\n        \"Relationships\",\n        \"Magic\",\n        \"Work\",\n      ],\n      name: \"2020 Goal\",\n      fill: \"toself\",\n    },\n    {\n      type: \"scatterpolar\",\n      r: [7, 7, 5, 5, 5, 9, 7],\n      theta: [\n        \"Work\",\n        \"Tech\",\n        \"Health\",\n        \"Hobbies\",\n        \"Relationships\",\n        \"Magic\",\n        \"Work\",\n      ],\n      name: \"2020 Actual\",\n      fill: \"toself\",\n    },\n  ];\n\n  const layout = {\n    polar: {\n      radialaxis: {\n        visible: true,\n        range: [0, 10],\n      },\n    },\n    showlegend: true,\n  };\n  const config = {\n    displayModeBar: false,\n  };\n\n  if (typeof plotly !== \"undefined\" && plotly) {\n    try {\n      await plotly.newPlot(div, data as any, layout, config);\n    } catch (error) {\n      console.error(\"Error creating radar map:\", error);\n    }\n  } else {\n    console.warn(\"Plotly is not defined, skipping chart rendering\");\n  }\n}\n\n/**\n * Creates a heatmap for work balance\n * @param {string} div ID of the element to render the heatmap in\n * @param {Object} plotly Plotly library (optional)\n */\nexport async function make_balance_chart_by_work(div, plotly?) {\n  const roles = [\"Tech\", \"Work\"];\n  const layout = {\n    height: row_height * roles.length + heatmap_base,\n    margin: {\n      t: 5,\n    },\n    pad: 0,\n  };\n  const color_scale = [\n    [0.0, \"darkblue\"],\n    [0.4, \"blue\"],\n    [0.5, ideal_color],\n    [0.6, \"darkred\"],\n    [1.0, \"red\"],\n  ];\n  const gap_desire_over_time = [\n    [7, 4, 7, 8, 2, 4, 2, 3, 2, 8], //  Tech\n    [10, 7, 5, 5, 3, 5, 6, 6, 7, 5], //  Work\n  ];\n\n  const data = [\n    {\n      colorscale: color_scale,\n      zmin: 0,\n      zmax: 10,\n      x: months.slice(2, 13),\n      y: roles,\n      z: gap_desire_over_time,\n      type: \"heatmap\",\n    },\n  ];\n  const config = {\n    displayModeBar: false,\n  };\n\n  if (typeof plotly !== \"undefined\" && plotly) {\n    try {\n      await plotly.newPlot(div, data as any, layout, config);\n    } catch (error) {\n      console.error(\"Error creating work balance chart:\", error);\n    }\n  } else {\n    console.warn(\"Plotly is not defined, skipping chart rendering\");\n  }\n}\n\n/**\n * Creates a heatmap for desired rest time\n * @param {string} div ID of the element to render the heatmap in\n * @param {Object} plotly Plotly library (optional)\n */\nexport async function make_balance_chart_by_desired_time_rest(div, plotly?) {\n  const roles = [\"Health\", \"Hobbies\", \"Family\", \"Magic\"];\n  const gap_desire_over_time = [\n    // J, F, M, A, M, J, J, A, S, O, N, D\n    [4, 4, 3, 4, 5, 3, 2, 2, 3, 2], // Health\n    [4, 4, 3, 4, 5, 4, 4, 2, 4, 5], // Hobbies\n    [2, 3, 3, 4, 1, 5, 4, 3, 2, 4], // Family\n    [5, 5, 5, 4, 5, 5, 4, 5, 4, 5], //  Magic\n  ];\n\n  const color_scale = [\n    [0.0, \"red\"],\n    [0.4, \"darkred\"],\n    [0.5, ideal_color],\n    [0.6, \"blue\"],\n    [1.0, \"darkblue\"],\n  ];\n  const data = [\n    {\n      colorscale: color_scale,\n      zmin: 0,\n      zmax: 10,\n      x: months.slice(2, 13),\n      y: roles.reverse(),\n      z: gap_desire_over_time.reverse(),\n      type: \"heatmap\",\n    },\n  ];\n  const config = {\n    displayModeBar: false,\n  };\n  const layout = {\n    height: row_height * roles.length + heatmap_base,\n    margin: {\n      t: 5,\n    },\n    pad: 0,\n  };\n\n  if (typeof plotly !== \"undefined\" && plotly) {\n    try {\n      await plotly.newPlot(div, data as any, layout, config);\n    } catch (error) {\n      console.error(\"Error creating rest time chart:\", error);\n    }\n  } else {\n    console.warn(\"Plotly is not defined, skipping chart rendering\");\n  }\n}\n\n// Export utility functions for testing\nexport const UT = {\n  SevenHabits,\n  ThingsIEnjoy,\n};\n","import { random_from_list, append_randomizer_div } from \"./index\";\nfunction html_for_blogpost(post) {\n  const item = $(\"<div/>\");\n  // TODO: HACK: Strip to the right of Week number\n  const title_href = `<h4> <a href='${post.url}'}>${post.title}</a></h4>`;\n  const monthNames = [\n    \"January\",\n    \"February\",\n    \"March\",\n    \"April\",\n    \"May\",\n    \"June\",\n    \"July\",\n    \"August\",\n    \"September\",\n    \"October\",\n    \"November\",\n    \"December\",\n  ];\n\n  item.append(title_href);\n  // HACK: Upsize to larger thumbnail, seems like blogger auto resizes to include a 320 image as well.\n  const thumbnail_url = post.thumbnail.replace(\"s72-c\", \"s320\");\n\n  const published_date = new Date(post.published);\n  const excerptDisplayText = `\n    <div> ${\n      monthNames[published_date.getMonth()]\n    } ${published_date.getFullYear()} - ${post.excerpt}\n    </div>\n   `;\n  if (post.thumbnail != \"\") {\n    console.log(post.title);\n    console.log(published_date);\n    item.append(\n      // `<div> <a href='${post.url}'}><img src='${thumbnail_url}'/></div>`\n      `\n      <div style='overflow:auto'>\n\n      <a href='${post.url}'}><img class=\"img-fluid\" style='float:left; margin-right:10px' src='${thumbnail_url}'/></a>\n      ${excerptDisplayText}\n      </div>`\n    );\n  } else {\n    item.append(excerptDisplayText);\n  }\n  const ret = item.html();\n  return ret;\n}\n\nfunction get_achievement_posts(imported_posts: Array<any>) {\n  return imported_posts.filter(post =>\n    post.title.toLowerCase().includes(\"achievement\")\n  );\n}\nfunction get_recent_posts(imported_posts: Array<any>) {\n  return imported_posts.filter(post => post.tags.includes(\"family-journal\"));\n}\n\nfunction ProcessImports(posts: Array<any>) {\n  console.log(\"Processing\", posts.length, \"posts\");\n  if (!posts) {\n    console.log(`No posts being imported`);\n    return;\n  }\n\n  //\n  // Import all history\n  const random_div = \"#random-post\";\n  const achievement_div = \"#achievment\";\n  const random_recent = \"#random-recent\";\n\n  append_randomizer_div(random_div, () =>\n    html_for_blogpost(random_from_list(posts))\n  );\n\n  // Add a random achievement post\n  append_randomizer_div(achievement_div, () =>\n    html_for_blogpost(random_from_list(get_achievement_posts(posts)))\n  );\n  append_randomizer_div(random_recent, () =>\n    html_for_blogpost(random_from_list(get_recent_posts(posts)))\n  );\n}\n\nfunction add_imported_blog_posts() {\n  const imported_posts_url = \"/ig66/ig66-export.json\";\n  $.getJSON(imported_posts_url, ProcessImports);\n}\n//\n// Todo put in own file\ninterface Role {\n  title: string;\n  summary: string;\n  full_text: string;\n}\n\ninterface Roles {\n  roles: Role[];\n}\n\nfunction html_for_role(role: Role) {\n  // url encode the role title\n  const role_file_name = role.title.replace(/ /g, \"%20\");\n  const voices = [\"igor\", \"ammon\"];\n  const random_voice = voices[Math.floor(Math.random() * voices.length)];\n  // Yucky - toggle_play_pause is a global function in enjoy2.md - bleh,  so brittle\n  return `\n  <div>\n    <audio id=\"eulogy-player\">\n      <source src=\"https://github.com/idvorkin/blob/raw/master/read_eulogy/${random_voice}/${role_file_name}.mp3\" type=\"audio/mp3\">\n    </audio>\n  <b>${role.title} <a class='lead' onclick=\"toggle_play_pause('eulogy-player')\"></a></b> - ${role.summary}\n  </div>\n  `;\n}\n\nfunction ProcessEulogy(div: string, roles: Roles) {\n  if (!roles) {\n    console.log(`No roles being imported`);\n    return;\n  }\n  console.log(\"Processing\", roles.roles.length, \"roles\");\n\n  // Import all history\n  append_randomizer_div(div, () =>\n    html_for_role(random_from_list(roles.roles))\n  );\n}\n\nfunction add_eulogy_roles(div: string) {\n  const imported_posts_url = \"/eulogy.json\";\n  $.getJSON(imported_posts_url, (roles: Roles) => ProcessEulogy(div, roles));\n}\n\nexport { add_imported_blog_posts, add_eulogy_roles, html_for_role };\n"],"names":["$5c367f1c83ef0920$export$fc303307c4ed1d41","url_info","title_href","url","title","description","$5c367f1c83ef0920$export$f6f0b6976f5f23e5","list","length","Math","floor","random","$5c367f1c83ef0920$export$448332262467e042","array","currentIndex","randomIndex","$5c367f1c83ef0920$export$7691c4557333f2d2","parent_id","random_html_factory","$parent","$","console","log","new_element","empty","append","click","event","target","tagName","$5c367f1c83ef0920$var$cached_link_info","$5c367f1c83ef0920$export$46c928bda6aa7b36","isProd","current_url","window","location","href","includes","backlinks_url","response","fetch","data","json","e","error","$f0012082fffd161b$export$e6161a0b7d67cb98","Error","$f0012082fffd161b$export$29c0cdb4d4a5ddbd","pages","Object","entries","map","metadata","doc_size","last_modified","filter","page","trim","sort","a","b","Date","getTime","$3900136bb96a6238$export$ef9b662f4c71b2fc","containerId","recentPostsContainer","document","getElementById","recentPages","sortedPages","slice","p","html","$3900136bb96a6238$export$384a04fc5c755793","count","split","substring","join","innerHTML","$75f29f91bc155aaa$export$13834ebe897fc419","groupedPages","forEach","date","monthYear","toLocaleString","month","getFullYear","push","$75f29f91bc155aaa$export$aae47d45e80886f7","formattedDate","toLocaleDateString","day","$75f29f91bc155aaa$export$ef9b662f4c71b2fc","initialPostsCount","doc","recentContainer","$75f29f91bc155aaa$export$7d71baea36fe6ea9","initialPages","remainingPages","remainingHtml","$75f29f91bc155aaa$export$593755c5b8f32d8f","$75f29f91bc155aaa$export$765b6a4ea7d49a1b","toggleId","contentId","toggleElement","addEventListener","contentElement","iconElement","querySelector","style","display","classList","add","remove","$75f29f91bc155aaa$export$559328b3f08f1a41","readyState","$417ebc8475d6fc5d$var$tocExpand","$417ebc8475d6fc5d$var$checkExpandToggle","toc","toggle","warn","addClass","text","removeClass","$417ebc8475d6fc5d$var$ForceShowRightSideBar","mainContent","tocDropUp","$417ebc8475d6fc5d$var$generateToc","id","showPinToc","Toc","level","top","class","ulClass","targetId","tocMenu","backToTop","gotoBottom","forceSideBar","preventDefault","stopPropagation","scrollTo","body","scrollHeight","$417ebc8475d6fc5d$var$AddLinksToPage","allUrls","page_path","backlinks","frontlinks","URL","pathname","incoming_links","outgoing_links","message","link_parent_location","incoming_location","find","sort_descending_by_size","Number","link","clean_front_links","outgoing_location","graph_location","stripped_page_path","replace","$417ebc8475d6fc5d$var$make_html_summary_link_error","attr","$417ebc8475d6fc5d$var$add_link_loader","$417ebc8475d6fc5d$var$AddSummarysToPage","backLinks","summary_links","makeArray","raw_link","ref","redirects","undefined","$417ebc8475d6fc5d$var$make_html_summary_link","attribution","$417ebc8475d6fc5d$var$get_back_links","$417ebc8475d6fc5d$var$cached_back_links","backlinksJson","getJSON","$417ebc8475d6fc5d$var$keyboard_shortcut_loader","mouseTrap","Mousetrap","bind","$417ebc8475d6fc5d$var$SwapProdAndTest","prodPrefix","testPrefix","newURL","shortcutHelp","alert","$417ebc8475d6fc5d$var$replaceListPlaceholdersInTables","$417ebc8475d6fc5d$var$replacePlaceholdersWithLists","listReplacements","placeholderText","placeholderLink","first","listClone","clone","children","replaceWith","$417ebc8475d6fc5d$var$buildListReplacementMap","replacements","each","_","firstListItem","firstElementChild","firstItemText","textContent","startsWith","isNaN","parseInt","$417ebc8475d6fc5d$export$38653e1d7f0b5689","ready","autocomplete","$bd9399c7e2744abd$var$autocomplete","getAlgoliaResults","$bd9399c7e2744abd$var$getAlgoliaResults","$bd9399c7e2744abd$var$AutoCompleteHitTemplate","item","createElement","dangerouslySetInnerHTML","__html","$bd9399c7e2744abd$var$InstantSearchHitTemplate","hit","anchor","highlighted","_highlightResult","value","content","err","$bd9399c7e2744abd$var$get_random_post","random_post","$bd9399c7e2744abd$var$get_recent_posts","all_url_info","realPages","$bd9399c7e2744abd$var$GetRandomSearchResults","sourceId","getItems","sized_array","Array","Promise","all","getItemUrl","templates","header","$bd9399c7e2744abd$var$GetRecentSearchResults","$bd9399c7e2744abd$export$b960629124c745df","appid","search_api_key","index_name","autocomplete_id","includeFamilyJournal","featuredCount","recentCount","randomCount","searchClient","algoliasearch","randomSearchResults","recentSearchResults","elementId","container","placeholder","getSources","query","isEmptySearch","featuredPosts","$bd9399c7e2744abd$var$GetAlgoliaResults","hitsPerPage","queries","indexName","filters","params","highlightPreTag","highlightPostTag","debug","openOnFocus","detachedMediaQuery","$6d425df71f5a07e7$export$2eba8ec3a333fdbb","constructor","name","$6d425df71f5a07e7$export$859810117f914263","categoryToPromptsProvider","$6d425df71f5a07e7$export$f715474a449e7185","renderer","$6d425df71f5a07e7$export$3b78ee04d6f6b650","map_category_to_prompts","category","keys","get","prompts_for_category","jQueryProvider","randomizerAppender","after","starting_node","current_category","Map","node","next","prop","set","from","li","$6d425df71f5a07e7$export$125d51429649aed5","Q","current","parent","shift","child","$6d425df71f5a07e7$export$e017c509fd729fbc","mapProvider","k","v","_index","$6d425df71f5a07e7$export$390791d65c97e7d4","label","tree_node","map_node_to_prompts","clicked_node","_parent","has","prompt","flat","$6d425df71f5a07e7$export$722c014d8e7c7fc6","plot_element_id","random_text_div_id","root","plotlyProvider","Plotly","sunburst_tree_flat","$6d425df71f5a07e7$export$4fa03e2ac1e21ce8","names_parent_names","n","ids","labels","parents","sunburst_data","type","outsidetextfont","size","color","hoverinfo","marker","line","width","maxdepth","displayModeBar","assign","values","sunburstPlot","newPlot","margin","l","r","t","sunburstcolorway","set_random_prompt_text","on","points","$92ca6dc26425dcae$var$html_for_blogpost","post","thumbnail_url","thumbnail","published_date","published","excerptDisplayText","monthNames","getMonth","excerpt","$92ca6dc26425dcae$var$ProcessImports","posts","imported_posts","toLowerCase","tags","$92ca6dc26425dcae$export$42081a69ee292945","$92ca6dc26425dcae$export$13004ff06099531d","div","roles","$92ca6dc26425dcae$var$ProcessEulogy","$92ca6dc26425dcae$export$d5d79470c0eabcc3","role","role_file_name","voices","random_voice","summary","$9f283bd0ad425971$export$96d8ac85dbc3b083","get_tree","$9f283bd0ad425971$export$9add44f13af82b94","health","magic","hobbies","relationships","joy","$9f283bd0ad425971$export$2a7b436ba2130b9d","filename","$9f283bd0ad425971$export$43b8cbfc567b2b3c","linkInfoProvider","randomSelector","all_pages","$9f283bd0ad425971$export$a05fecdd139cc0d6","element1","element2","element3","eulogyLoader","$9f283bd0ad425971$export$ed4ccdb0ea359d16","sunburstAdder","promptsAdder","postsAdder","eulogyAdder","$9f283bd0ad425971$export$690b8256aeac9ddf","$9f283bd0ad425971$export$5971d3574f6a5694","$9f283bd0ad425971$export$be5467d8e644e939","restChartMaker","$9f283bd0ad425971$export$53e7a29c57fc33d2","workChartMaker","$9f283bd0ad425971$export$6bb9c0a936a9f448","radarMapMaker","$9f283bd0ad425971$export$8113f0fb50ea4947","$9f283bd0ad425971$export$16352d1b10c5eb38","$9f283bd0ad425971$export$6b13b69749622324","plotly","theta","fill","polar","radialaxis","visible","range","showlegend","layout","height","$9f283bd0ad425971$export$90d9fe9646abdcf4","pad","colorscale","zmin","zmax","x","y","z","reverse","gap_desire_over_time","defer","focusSearch","searchInput","focus","tocElement","searchElement","items","then","links","random_from_list","shuffle","append_randomizer_div","get_link_info","load_globals","MakeBackLinkHTML","CreateAutoComplete","initRecentAllPosts","add_random_prompts","add_sunburst","TreeNode","load_enjoy2","load_7_habits","makePostPreviewHTML","load_ig66","load_balance","load_random_eulogy"],"version":3,"file":"index.js.map"}