function e(e){if(0!==e.length)return e[Math.floor(Math.random()*e.length)]}function t(e){let t=e.length,a;for(;0!=t;)a=Math.floor(Math.random()*t),t--,[e[t],e[a]]=[e[a],e[t]];return e}async function a(e,t){let a=$(e);if(1!=a.length){console.log(`append_randomizer_div ${e} not present`);return}let n=$(await t());a.empty().append(n),a.click(async function(e){if("A"!=e.target.tagName){let e=$(await t());a.empty().append(e)}})}let n=null;async function o(e){if(null!=n)return n;let t=(e||window.location.href).includes("https://idvork.in");var a="https://raw.githubusercontent.com/idvorkin/idvorkin.github.io/master/back-links.json?flush_cache=True";t||(a="/back-links.json");try{let e=await fetch(a);return n=(await e.json()).url_info}catch(e){return console.error("Error fetching link info",e),{}}}let l=!0;function r(){let e=$(".ui-toc-dropdown .toc"),t=$(".expand-toggle");l?(e.addClass("expand"),t.text("Collapse all")):(e.removeClass("expand"),t.text("Expand all"))}function i(){let e=$("#right-sidebar"),t=$("#main-content");e.removeClass(),e.addClass("col-4 pl-0"),t.removeClass(),t.addClass("col-8 pr-0");let a=$("#id-ui-toc-dropdown");a.removeClass(),a.addClass("d-none")}function s(e,t){let a=$(`#${e}`);a.html(""),new window.Toc("content-holder",{level:3,top:-1,class:"toc",ulClass:"nav",targetId:e}),"undefined"===a.text()&&a.html("");let n=$('<div class="toc-menu"></div'),o=$('<a class="expand-toggle" href="#">Collapse all</a>'),s=$('<a class="back-to-top" href="#">Top of page</a>'),c=$('<a class="go-to-bottom" href="#">Bottom of page</a>'),d=$('<a class="go-to-bottom" href="#">Pin ToC</a>');r(),o.click(e=>{e.preventDefault(),e.stopPropagation(),l=!l,r()}),s.click(e=>{e.preventDefault(),e.stopPropagation(),window.scrollTo(0,0)}),c.click(e=>{e.preventDefault(),e.stopPropagation(),window.scrollTo(0,document.body.scrollHeight)}),d.click(e=>i()),n.append(o).append(s).append(c),t&&n.append(d),a.append(n)}function c(e){let t=`<a href=${e.url}>${e.title}</a>`;return`
<div>
    <div class="link-box description truncate-css"> ${t}:<span class="link-description"> ${e.description} <span></div>
</div>`}async function d(e){let t=new URL(document.URL).pathname,a=e[t]?.incoming_links,n=e[t]?.outgoing_links;if(!a&&!n){console.log(`No backlinks for the page ${t}`);return}let o=$("#links-to-page");if(!o){console.log("No back_link_location");return}o.append(`
<ul class="nav nav-tabs nav-fill" id="myTab" role="tablist">
  <li class="nav-item" role="presentation">
    <button class="nav-link active" id="home-tab" data-bs-toggle="tab" data-bs-target="#incoming" type="button" role="tab" aria-controls="incoming" aria-selected="true">Links to here</button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="profile-tab" data-bs-toggle="tab" data-bs-target="#outgoing" type="button" role="tab" aria-controls="outgoing" aria-selected="false">Link from here</button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="profile-tab" data-bs-toggle="tab" data-bs-target="#graph" type="button" role="tab" aria-controls="outgoing" aria-selected="false">Graph</button>
  </li>
</ul>
<div class="tab-content" id="myTabContent">
  <div class="tab-pane fade show active " id="incoming" role="tabpanel" aria-labelledby="incoming-tab"></div>
  <div class="tab-pane fade" id="outgoing" role="tabpanel" aria-labelledby="outgoing-tab"></div>
  <div class="tab-pane fade" id="graph" role="tabpanel" aria-labelledby="outgoing-tab">
    <span> View the graph for: </span>
  </div>
</div>
`);let l=o.find("#incoming");var r=(t,a)=>Number(e[a].doc_size)-Number(e[t].doc_size);if(a)for(var i of a.sort(r)){let t=e[i];l.append(c(t))}let s=[];for(var i of n)e[i]&&s.push(i);let d=o.find("#outgoing");if(s)for(let t of s.sort(r)){let a=e[t];d.append(c(a))}console.log("Added Graph");let u=o.find("#graph"),p=t.replace(/\//g,"");u.append(`<a href='/graph#${p}'>${t} (${p}) </a>`)}function u(e,t){return`<span class='text-danger'>Error: Invalid link for ${e.attr("href")} ${t} </span>`}async function p(){var e;d(await o()),e=await f(),$.makeArray($(".summary-link")).forEach(t=>{let a=$(t);try{console.log(a.attr("href"));let t=a.attr("href");if(void 0!=e.redirects[t]&&(t=e.redirects[t]),void 0==e.url_info[t]){a.html(u(a,"not found in url info"));return}a.html(function(e,t){let a=`(From:<a href='${t.url}'> ${t.title}</a>)`;return`<div>
        <i> ${t.description}</i> ${a}
    </div>`}(0,e.url_info[t]))}catch(e){a.html(u(a,e))}})}let m=null;async function f(){if(null!=m)return m;let e=window.location.href.includes("https://idvork.in");var t="";return t=e?"https://raw.githubusercontent.com/idvorkin/idvorkin.github.io/master/back-links.json?flush_cache=True":"/back-links.json",m=await $.getJSON(t)}function g(){let e=Mousetrap();e.bind("s",e=>void $("#autocomplete-search-box-button").click()),e.bind("t",e=>i()),e.bind("p",e=>(function(){let e=window.location.href,t="https://idvork.in",a="http://localhost:4000",n=e.includes(t),o=e;o=n?e.replace(t,a):e.replace(a,t),window.location.href=o})()),e.bind("a",e=>location.href="/all"),e.bind("m",e=>location.href="/toc"),e.bind("6",e=>location.href="/ig66");let t=`
Try these shortcuts:
  s - search
  / - start chatting with others
  t - force sidebar
  p - swap prod and test
  z - surprise me
  a - all posts
  m - global toc
  6 - family journal
  `;e.bind("?",e=>alert(t))}function h(){$(p),$(g),$(()=>{s("ui-toc",!0),s("ui-toc-affix",!1)})}let{autocomplete:b,getAlgoliaResults:y}=window["@algolia/autocomplete-js"];function v({item:e,createElement:t}){return t("div",{dangerouslySetInnerHTML:{__html:function(e){try{let t=e.url;e.anchor&&(t+=`#${e.anchor}`);let a=e._highlightResult;a||console.log("No Highlight",e);let n=a.title.value,o=a?.content?.value??"";return`
           <span onClick="window.location='${t}';">
              <b> <a href="${t}">${n}</a></b> <span>${o}</span>
           </span>
        `}catch(t){console.log("Error in hitTemplate",t,e)}return"invalid HTML"}(e)}})}async function w(){let t=e(Object.entries(await o()).map(e=>e[1]));return{title:t.title,url:t.url,description:t.description}}async function k(){return{sourceId:"links",async getItems(){let e=Array(10).join("_").split("_");return await Promise.all(e.map(async e=>w()))},getItemUrl:({item:e})=>e.url,templates:{item:({item:e,createElement:t})=>t("div",{dangerouslySetInnerHTML:{__html:`
            <span onClick="window.location='${e.url}';" >
           <b> <a href="${e.url}">${e.title}</a></b>
            <span>${e.description}</span>
            </span>
            `}}),header:({createElement:e})=>e("div",{dangerouslySetInnerHTML:{__html:"<i style='color:grey'>Random posts ...</i>"}})}}}async function _(e,t,a,n,o){let l=algoliasearch(e,t),r=await k();if(!$(n).length){console.log("No autocomplete element found","autocomplete_id",n);return}return b({container:"#autocomplete-search-box",placeholder:"Search Igor's Musings ...",getSources:function({query:e}){let t=0===e.length;t&&(e=" ");let n=[function(e,t,a,n,o=!1){let l="NOT tags:family-journal";return o&&(l=""),{sourceId:"from_search",getItems:()=>y({searchClient:e,queries:[{indexName:t,query:a,filters:l,params:{hitsPerPage:n,highlightPreTag:"<span style='background:yellow'>",highlightPostTag:"</span>"}}]}),templates:{item:v,header:({createElement:e})=>e("div",{dangerouslySetInnerHTML:{__html:"<i style='color:grey'>Featured posts ...</i>"}})},getItemUrl({item:e}){let t=e.url;return e.anchor&&(t+=`#${e.anchor}`),t}}}(l,a,e,t?4:10,o)];return t&&n.push(r),n},debug:!1,openOnFocus:!0,detachedMediaQuery:""})}class x{constructor({name:e,value:a=25,children:n=[]}){this.name=e,this.children=t(n),this.value=a}}function M(){let t=T();for(let n of t.keys())!function(t,n){let o=$('<div class="alert alert-primary" role="alert"/>');$(t).after(o),a(o,()=>`<span>${e(n)}</span>`)}(n,t.get(n))}function T(){let e=$("h3").first(),t=e,a=[],n=new Map;for(let o=e;0!=o.length;o=$(o).next()){if("H3"==o.prop("tagName")){n.set(t,a),t=o,a=[];continue}"UL"==o.prop("tagName")&&(a=Array.from($(o).find("li")).map(e=>$(e).text()))}return n.set(t,a),n}function*C(e){if(!e)return;let t=[];for(t.push([e,null]);t.length>0;){let[e,a]=t.shift();for(let a of e.children??[])t.push([a,e]);yield[e,a]}}function P(){return new Map(Array.from(T().entries()).map(([e,t],a)=>[e.text(),t]))}function H(t,a,n){let[o,l]=Array.from(C(a)).find(([e,a])=>e.name==t);return e(Array.from(C(o)).map(([e,t])=>e).filter(e=>n.has(e.name)).map(e=>n.get(e.name).map(t=>`${e.name}: ${t}`)).flat())}async function N(e,t,a){let n=function(e){let t=Array.from(C(e)).map(([e,t])=>[e.name,t?.name]);return{ids:t.map(([e,t])=>e),labels:t.map(([e,t])=>e),parents:t.map(([e,t])=>t)}}(a);var o={type:"sunburst",outsidetextfont:{size:20,color:"#377eb8"},hoverinfo:"none",marker:{line:{width:2}},maxdepth:2,displayModeBar:!1};Object.assign(o,n),delete o.values;let l=await Plotly.newPlot(e,[o],{margin:{l:0,r:0,b:0,t:0},sunburstcolorway:["#636efa","#ef553b","#00cc96"]},{displayModeBar:!1}),r=e=>{console.log("set_random_prompt_text",e),$(`#${t}`).text(e)};$(`#${t}`).first().click(()=>{r(H($("#sunburst text:first").text(),a,P()))}),l.on("plotly_sunburstclick",e=>{r(H(e.points[0].label,a,P()))})}function j(e){let t=$("<div/>"),a=`<h4> <a href='${e.url}'}>${e.title}</a></h4>`;t.append(a);let n=e.thumbnail.replace("s72-c","s320"),o=new Date(e.published),l=`
    <div> ${["January","February","March","April","May","June","July","August","September","October","November","December"][o.getMonth()]} ${o.getFullYear()} - ${e.excerpt}
    </div>
   `;return""!=e.thumbnail?(console.log(e.title),console.log(o),t.append(`
      <div style='overflow:auto'>

      <a href='${e.url}'}><img class="img-fluid" style='float:left; margin-right:10px' src='${n}'/></a>
      ${l}
      </div>`)):t.append(l),t.html()}function A(t){if(console.log("Processing",t.length,"posts"),!t){console.log("No posts being imported");return}a("#random-post",()=>j(e(t))),a("#achievment",()=>j(e(t.filter(e=>e.title.toLowerCase().includes("achievement"))))),a("#random-recent",()=>j(e(t.filter(e=>e.tags.includes("family-journal")))))}function S(){$.getJSON("/ig66/ig66-export.json",A)}function z(t){$.getJSON("/eulogy.json",n=>(function(t,n){if(!n){console.log("No roles being imported");return}console.log("Processing",n.roles.length,"roles"),a(t,()=>(function(e){let t=e.title.replace(/ /g,"%20"),a=["igor","ammon"],n=a[Math.floor(Math.random()*a.length)];return`
  <div>
    <audio id="eulogy-player">
      <source src="https://github.com/idvorkin/blob/raw/master/read_eulogy/${n}/${t}.mp3" type="audio/mp3">
    </audio>
  <b>${e.title} <a class='lead' onclick="toggle_play_pause('eulogy-player')">\u{1F508}</a></b> - ${e.summary}
  </div>
  `})(e(n.roles)))})(t,n))}class L{get_tree(){return new x({name:"7H ",children:[new x({name:""}),new x({name:"Be Proactive"}),new x({name:"Begin with the end in mind"}),new x({name:"First things First"}),new x({name:"Think Win/Win"}),new x({name:"First Understand"}),new x({name:"Synergize"}),new x({name:"Sharpen the Saw"})]})}}class B{get_tree(){let e=new x({name:"Health",children:[{name:"Physical"},{name:"Emotional"},{name:"Cognative"}],value:31}),t=new x({name:"Magic",children:[new x({name:"Card Magic"}),new x({name:"Coin Magic"}),new x({name:"Band Magic"})]}),a=new x({name:"Hobbies",children:[new x({name:"Biking"}),new x({name:"Tech"}),new x({name:"Juggling"})]}),n=new x({name:"Relationships",children:[new x({name:"Zach"}),new x({name:"Amelia"}),new x({name:"Tori"}),new x({name:"Friends"})]}),o=new x({name:"Joy",children:[new x({name:"Balloons"}),new x({name:"Joy to Others"})]});return new x({name:"Invest in",children:[e,t,a,n,o]})}}function F({url:e,title:t,description:a}){let n=`<a href='${e}'}>${t}</a>`,o="audio_player_"+Math.floor(1e10*Math.random()),l=e.replace(/\//g,"_");return`
    <div>
        <audio id='${o}'>
          <source src="https://github.com/idvorkin/blob/raw/master/url_info_voices/igor/${l}.mp3" type="audio/mp3">
        </audio>
      ${n}:  <b><a class='lead' onclick="toggle_play_pause('${o}')">\u{1F508}</a></b> ${a}
    </div>
  `}async function I(){let t=e(Object.entries(await o()).map(e=>e[1]));return F({url:t.url,title:t.title,description:t.description})}function J(){z("#e1"),z("#e2"),z("#e3")}function O(){N("sunburst","sunburst_text",new B().get_tree()),M(),S(),z("#random-eulogy-role"),a("#random-blog-posts",I)}function E(){N("sunburst","sunburst_text",new L().get_tree()),M()}function R(){S()}function W(){Q("balance-heatmap-rest"),G("balance-heatmap-work"),U("balance-radar-map-ideal")}let D=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sep","Oct","Nov","Dec"];async function U(e){Plotly.newPlot(e,[{type:"scatterpolar",r:[8,8,8,5,8,8,8],theta:["Work","Tech","Health","Hobbies","Relationships","Magic","Work"],name:"2020 Goal",fill:"toself"},{type:"scatterpolar",r:[7,7,5,5,5,9,7],theta:["Work","Tech","Health","Hobbies","Relationships","Magic","Work"],name:"2020 Actual",fill:"toself"}],{polar:{radialaxis:{visible:!0,range:[0,10]}},showlegend:!0},{displayModeBar:!1})}let q="#00BF00";async function G(e){let t=["Tech","Work"],a={height:20*t.length+100,margin:{t:5},pad:0},n=[{colorscale:[[0,"darkblue"],[.4,"blue"],[.5,q],[.6,"darkred"],[1,"red"]],zmin:0,zmax:10,x:D.slice(2,13),y:t,z:[[7,4,7,8,2,4,2,3,2,8],[10,7,5,5,3,5,6,6,7,5]],type:"heatmap"}];await Plotly.newPlot(e,n,a,{displayModeBar:!1})}async function Q(e){let t=["Health","Hobbies","Family","Magic"],a=[{colorscale:[[0,"red"],[.4,"darkred"],[.5,q],[.6,"blue"],[1,"darkblue"]],zmin:0,zmax:10,x:D.slice(2,13),y:t.reverse(),z:[[4,4,3,4,5,3,2,2,3,2],[4,4,3,4,5,4,4,2,4,5],[2,3,3,4,1,5,4,3,2,4],[5,5,5,4,5,5,4,5,4,5]].reverse(),type:"heatmap"}],n={height:20*t.length+100,margin:{t:5},pad:0};await Plotly.newPlot(e,a,n,{displayModeBar:!1})}$(document).ready(function(){"function"==typeof defer?defer(h):h();let a=()=>{let e=$("#search-box");e.length>0&&e.focus()};"undefined"!=typeof Mousetrap&&Mousetrap.bind("s",()=>a()),$("#toc-content").length>0&&console.log("TOC initialized"),$("#search-box").length>0&&console.log("Search initialized");let n=["item1","item2","item3"];console.log("Random item:",e(n)),console.log("Shuffled items:",t([...n])),o().then(e=>{console.log("Links loaded, count:",Object.keys(e).length)}),console.log("Blog JavaScript initialized")});export{e as random_from_list,t as shuffle,a as append_randomizer_div,o as get_link_info,h as load_globals,c as MakeBackLinkHTML,_ as CreateAutoComplete,O as load_enjoy2,E as load_7_habits,F as makePostPreviewHTML,R as load_ig66,W as load_balance,J as load_random_eulogy};